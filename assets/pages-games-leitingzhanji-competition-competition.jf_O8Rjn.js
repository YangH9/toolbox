import{r as e,m as a,c as l,a as t,w as s,F as d,i as u,J as r,b as o,o as c,f as n,g as _,h as i,e as f,t as m,A as y,a9 as x,u as b,p as v,aa as p,ab as g,n as k,ac as h,s as w,q as Y,j as T}from"./index-YjGwFtAl.js";import{a as M,b as C}from"./config.Dny4K3GL.js";const D=36e5,H={__name:"competition",setup(H){const K=r("dayjs");uni.$sharePageTitle=`对战时间记录器-${M}`;const $=`${C}-competition-data`,j=e([{label:"无尽限时小组赛",key:"groupTime",nKey:"groupNoticeTime",oldKey:"xiaozusai",cd:16,date:0,prev:0,energy:"100"},{label:"无尽争霸赛",key:"battleTime",nKey:"battleNoticeTime",oldKey:"zhengbasai",cd:48,date:0,prev:0,energy:"300"}]),q=[["今天","昨天"].map(((e,a)=>({label:e,value:-a-1+1}))),new Array(24).fill(1).map(((e,a)=>({label:`${a}时`,value:a}))),new Array(60).fill(1).map(((e,a)=>({label:`${a}分`,value:a})))],A=e([0,0,0]);let z=0;e(!1);const E=e(a($).setTimeMode||"manual"),N=[{label:"一键设置当前时间",value:"current"},{label:"手动选择时间",value:"manual"}],O=()=>{const e=K();A.value=[0,e.hour(),e.minute()],z=e.valueOf()-e.hour()*D-6e4*e.minute()-1e3*(e.second()-59)},F=async e=>{const{value:a}=e.detail,{key:l}=e.currentTarget.dataset,t=[24*D,D,6e4],s=q.map((e=>e.map((e=>e.value)))),d=a.reduce(((e,a,l)=>e+s[l][a]*t[l]),z);j.value.find((e=>e.key===l)).date=d,P(l)},J=async e=>{const{key:a}=e.currentTarget.dataset;j.value.find((e=>e.key===a)).date=K().valueOf(),P(a)},P=async e=>{j.value.find((a=>a.key===e));const a={};j.value.forEach((e=>a[e.key]=e.date)),a.setTimeMode=E.value,Y($,a)},S=e=>{const{index:a}=e.currentTarget.dataset;j.value[a],w({title:"浏览器暂不支持",icon:"none"})},B=e=>{const{value:l}=e.detail;E.value=l;const t=a($)||{};t.setTimeMode=E.value,Y($,t)};return(async()=>{const e=a($);j.value.forEach((a=>{const{key:l,oldKey:t}=a;e&&e[t]&&(a.date=e[t]),e&&e[l]&&(a.date=e[l])}))})(),(e,a)=>{const r=o("my-page-header"),w=o("my-divider"),Y=u,M=y,C=v,H=x,$=h,z=g,P=p,G=o("my-ad-custom"),I=o("my-bottom-safety-space");return c(),l(d,null,[t(r),t(Y,{class:"pt_2"},{default:s((()=>[t(w,{content:"本工具仅作辅助记录时间，具体内容以官方为准。"}),(c(!0),l(d,null,n(j.value,((e,a)=>(c(),_(Y,{key:a,class:"mx_4 mb_4 shadow radius bg-color"},{default:s((()=>[t(Y,{class:"d_flex items_center px_4 py_3"},{default:s((()=>[t(Y,{class:"grow"},{default:s((()=>[t(Y,{class:"text_base"},{default:s((()=>[f(m(e.label),1)])),_:2},1024),t(Y,{class:"text-info"},{default:s((()=>[f("冷却结束后使用"),t(M,{class:"text-error font_bold px_1"},{default:s((()=>[f(m(e.energy),1)])),_:2},1024),f("体力触发")])),_:2},1024)])),_:2},1024),t(Y,null,{default:s((()=>[f("CD:"),t(M,{class:"text-error font_bold px_1"},{default:s((()=>[f(m(e.cd),1)])),_:2},1024),f("H")])),_:2},1024)])),_:2},1024),"manual"===E.value?(c(),_(H,{key:0,class:"cursor_default",mode:"multiSelector","range-key":"label",value:A.value,range:q,"data-key":e.key,onClick:O,onChange:F},{default:s((()=>[t(Y,{class:"d_flex items_center px_4 py_3 border_t"},{default:s((()=>[t(Y,{class:"grow"},{default:s((()=>[t(Y,{class:"text_base"},{default:s((()=>[f("本次点击"),t(M,{class:"text-error font_bold px_1"},{default:s((()=>[f("立即参加")])),_:1}),f("的时间")])),_:1}),e.date?(c(),_(Y,{key:0,class:"text-info"},{default:s((()=>[f(m(b(K)(e.date).format("YYYY/MM/DD HH:mm:ss")),1)])),_:2},1024)):i("",!0)])),_:2},1024),t(Y,null,{default:s((()=>[t(C,{class:"yang-button primary small outline","hover-class":"hover"},{default:s((()=>[f("设置时间")])),_:1})])),_:1})])),_:2},1024)])),_:2},1032,["value","data-key"])):"current"===E.value?(c(),_(Y,{key:1,class:"cursor_default"},{default:s((()=>[t(Y,{class:"d_flex items_center px_4 py_3 border_t"},{default:s((()=>[t(Y,{class:"grow"},{default:s((()=>[t(Y,{class:"text_base"},{default:s((()=>[f("本次点击"),t(M,{class:"text-error font_bold px_1"},{default:s((()=>[f("立即参加")])),_:1}),f("的时间")])),_:1}),e.date?(c(),_(Y,{key:0,class:"text-info"},{default:s((()=>[f(m(b(K)(e.date).format("YYYY/MM/DD HH:mm:ss")),1)])),_:2},1024)):i("",!0)])),_:2},1024),t(Y,null,{default:s((()=>[t(C,{class:"yang-button primary small outline","hover-class":"hover","data-key":e.key,onClick:J},{default:s((()=>[f("设置时间")])),_:2},1032,["data-key"])])),_:2},1024)])),_:2},1024)])),_:2},1024)):i("",!0),t(Y,{class:"d_flex items_center px_4 py_3 border_t"},{default:s((()=>[t(Y,{class:"grow"},{default:s((()=>[t(Y,{class:"text_base"},{default:s((()=>[f("预估冷却结束时间")])),_:1}),e.date?(c(),_(Y,{key:0,class:"text-info"},{default:s((()=>[f(m(b(K)(e.date+e.cd*D).format("YYYY/MM/DD HH:mm:ss")),1)])),_:2},1024)):i("",!0)])),_:2},1024),e.date?(c(),_(Y,{key:0},{default:s((()=>[t(C,{class:"yang-button primary small outline","hover-class":"hover","data-index":a,onClick:S},{default:s((()=>[f("添加日历")])),_:2},1032,["data-index"])])),_:2},1024)):i("",!0)])),_:2},1024)])),_:2},1024)))),128)),t(P,{class:"d_flex mx_4 mb_4 shadow radius bg-color",onChange:B},{default:s((()=>[(c(),l(d,null,n(N,((e,a)=>t(z,{key:a,class:k(["d_flex px_4 py_3 items_center grow",a===N.length-1?"":"border_r"])},{default:s((()=>[t(Y,{class:"mr_2"},{default:s((()=>[t($,{value:e.value,checked:e.value===E.value},null,8,["value","checked"])])),_:2},1024),t(Y,null,{default:s((()=>[f(m(e.label),1)])),_:2},1024)])),_:2},1032,["class"]))),64))])),_:1}),t(Y,{class:"mx_4 mb_4 shadow radius"},{default:s((()=>[t(Y,{class:"d_flex px_4 items_center radius border_b bg-color","hover-class":"bg-hover",onClick:a[0]||(a[0]=e=>{T({url:"/pages/system/subscribe"})})},{default:s((()=>[t(Y,{class:"my-icon-setting-1 text_xxl text-primary mr_2"}),t(Y,{class:"grow text_base"},{default:s((()=>[f("提醒管理")])),_:1}),t(Y,{class:"my-icon-chevron-right text_xxl text-info"})])),_:1})])),_:1}),t(G,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),t(I,{version:""})])),_:1})],64)}}};export{H as default};
