import{r as e,c as a,a as t,w as l,F as s,p as o,i as d,K as r,b as c,o as n,f as u,g as _,e as i,t as f,B as m,a7 as y,h as b,u as p,q as x,x as g,s as v}from"./index-BSOvYM8_.js";import{a as h,b as k}from"./config.Dny4K3GL.js";const Y=36e5,T=6e4,w={__name:"competition",setup(w){const K=r("dayjs");uni.$sharePageTitle=`对战时间记录器-${h}`;const D=`${k}-competition-data`,H=e([{label:"无尽限时小组赛",key:"groupTime",nKey:"groupNoticeTime",oldKey:"xiaozusai",cd:16,date:0,energy:"100"},{label:"无尽争霸赛",key:"battleTime",nKey:"battleNoticeTime",oldKey:"zhengbasai",cd:48,date:0,energy:"300"}]),$=[["今天","昨天"].map(((e,a)=>({label:e,value:-a-1+1}))),Array.from({length:24},((e,a)=>({label:`${a}时`,value:a}))),Array.from({length:60},((e,a)=>({label:`${a}分`,value:a})))],C=e([0,0,0]);let M=0;e(!1);(async()=>{const e=o(D);H.value.forEach((a=>{const{key:t,oldKey:l}=a;e&&e[l]&&(a.date=e[l]),e&&e[t]&&(a.date=e[t])}))})();const j=()=>{const e=K();C.value=[0,e.hour(),e.minute()],M=e.valueOf()-e.hour()*Y-e.minute()*T},q=async e=>{const{value:a}=e.detail,{key:t}=e.currentTarget.dataset,l=[24*Y,Y,T],s=$.map((e=>e.map((e=>e.value)))),o=a.reduce(((e,a,t)=>e+s[t][a]*l[t]),M);H.value.find((e=>e.key===t)).date=o;const d={};H.value.forEach((e=>d[e.key]=e.date)),g(D,d)},z=e=>{const{index:a}=e.currentTarget.dataset;H.value[a],v({title:"浏览器暂不支持",icon:"none"})};return(e,o)=>{const r=c("my-page-header"),g=c("my-divider"),v=d,h=m,k=x,w=y,D=c("my-ad-custom"),M=c("my-bottom-safety-space");return n(),a(s,null,[t(r),t(v,{class:"pt_2"},{default:l((()=>[t(g,{content:"本工具仅作辅助记录时间，具体内容以官方为准。"}),(n(!0),a(s,null,u(H.value,((e,a)=>(n(),_(v,{key:a,class:"mx_4 mb_4 shadow radius bg-color"},{default:l((()=>[t(v,{class:"d_flex items_center p_4"},{default:l((()=>[t(v,{class:"grow"},{default:l((()=>[t(v,{class:"text_base"},{default:l((()=>[i(f(e.label),1)])),_:2},1024),t(v,{class:"text-info"},{default:l((()=>[i("冷却结束后使用"),t(h,{class:"text-error font_bold px_1"},{default:l((()=>[i(f(e.energy),1)])),_:2},1024),i("体力触发")])),_:2},1024)])),_:2},1024),t(v,null,{default:l((()=>[i("CD:"),t(h,{class:"text-error font_bold px_1"},{default:l((()=>[i(f(e.cd),1)])),_:2},1024),i("H")])),_:2},1024)])),_:2},1024),t(w,{class:"cursor_default",mode:"multiSelector","range-key":"label",value:C.value,range:$,"data-key":e.key,onClick:j,onChange:q},{default:l((()=>[t(v,{class:"d_flex items_center p_4 border_t"},{default:l((()=>[t(v,{class:"grow"},{default:l((()=>[t(v,{class:"text_base"},{default:l((()=>[i("本次点击"),t(h,{class:"text-error font_bold px_1"},{default:l((()=>[i("立即参加")])),_:1}),i("的时间")])),_:1}),e.date?(n(),_(v,{key:0,class:"text-info"},{default:l((()=>[i(f(p(K)(e.date).format("YYYY/MM/DD HH:mm")),1)])),_:2},1024)):b("",!0)])),_:2},1024),t(v,null,{default:l((()=>[t(k,{class:"yang-button primary small outline","hover-class":"hover"},{default:l((()=>[i("设置时间")])),_:1})])),_:1})])),_:2},1024)])),_:2},1032,["value","data-key"]),t(v,{class:"d_flex items_center p_4 border_t"},{default:l((()=>[t(v,{class:"grow"},{default:l((()=>[t(v,{class:"text_base"},{default:l((()=>[i("预估冷却结束时间")])),_:1}),e.date?(n(),_(v,{key:0,class:"text-info"},{default:l((()=>[i(f(p(K)(e.date+e.cd*Y+T).format("YYYY/MM/DD HH:mm")),1)])),_:2},1024)):b("",!0)])),_:2},1024),e.date?(n(),_(v,{key:0},{default:l((()=>[t(k,{class:"yang-button primary small outline","hover-class":"hover","data-index":a,onClick:z},{default:l((()=>[i("设置提醒")])),_:2},1032,["data-index"])])),_:2},1024)):b("",!0)])),_:2},1024)])),_:2},1024)))),128)),t(D,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),t(M,{version:""})])),_:1})],64)}}};export{w as default};
