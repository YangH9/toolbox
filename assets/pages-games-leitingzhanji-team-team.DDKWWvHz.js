import{_ as e,a6 as a,r as l,ab as t,c as s,a as u,w as n,F as r,v as d,D as _,i as c,b as m,o,e as i,I as p,L as f,t as v,g as x,h as b,f as y,n as g,a8 as h,ag as Y,x as w}from"./index-DtiZCiZu.js";import{a as k}from"./config.CXGNUSHW.js";import{g as M}from"./data-all.B6khRC3V.js";const D="leitingzhanji-team-option-data",j=e({__name:"team",setup(e){const j=_("dayjs");uni.$sharePageTitle=`战队系统-${k}`;const z=[{label:"战队系统",url:"/pages/games/leitingzhanji/team/team"},{label:"人找队",url:"/pages/games/leitingzhanji/mutual-aid-zone/player"},{label:"队找人",url:"/pages/games/leitingzhanji/mutual-aid-zone/team"},{label:"升级经验",url:"/pages/games/leitingzhanji/team/levelup"},{label:"战队Boss",url:"/pages/games/leitingzhanji/team/boss"}].filter((e=>[...a()].at(-1).route!==e.url.replace(/^\//,""))),E=l({createTime:"",lostExp:0,timeRange:[]}),T=l({baseLevel:1,baseNum:30,levelupNum:5,memberExp:210}),B=l([{level:1,exp:7e3,num:30},{level:2,exp:15e3,num:35},{level:3,exp:34e3,num:40},{level:4,exp:66e3,num:45},{level:5,exp:158e3,num:50},{level:6,exp:252e3,num:60},{level:7,exp:368e3,num:70},{level:8,exp:84e4,num:80},{level:9,exp:0,num:90},{level:10,exp:0,num:100}].map((e=>{const{memberExp:a}=T.value,l=Math.ceil(e.exp/(a*e.num));return{...e,day:l}}))),R=l(M.find((e=>"ordinary"===e.key)).barrier.filter((e=>e.chapter>=11&&e.chapter<=14&&104!==e.value&&3===e.difficulty)).map((e=>({boss:e.boss,barrier:e.value})))),V=t((()=>{const e=R.value,a=j(E.value.timeRange[0]??"2025-11-20").day(3),l=Math.floor(j().diff(a,"day")/7)||0;return{boss:e[l%e.length].boss,nextBoss:e[(l+1)%e.length].boss}})),L=l(!0),N=l({day:1,level:1,exp:0,remain:0,num:T.value.baseNum,date:""}),q=t((()=>{const{memberExp:e}=T.value,a=N.value,l=B.value.find((e=>e.level===a.level)),t={day:1,level:1,date:""};return B.value.find((e=>e.level===l.level+1))?(t.level=l.level+1,t.day=Math.ceil((l.exp-a.remain)/(a.num*e)),t.date=j().add(t.day,"day").format("YYYY/MM/DD")):t.level=0,t})),C=l([]),I=t((()=>{const e=C.value;return L.value?(e||[]).slice(0,15):e||[]})),U=()=>{const e=j(E.value.createTime),a=E.value.lostExp,l=j().diff(e,"day")+7,t=B.value,{baseLevel:s,baseNum:u,memberExp:n}=T.value,r=new Array(l).fill(1).reduce(((l,r,d)=>{const _=d+1,c=e.add(d,"day");if(l){const e=l.at(-1),a={day:_,date:c.format("YYYY/MM/DD"),level:e.level,num:e.num,exp:e.exp,remain:e.remain},s=t.find((e=>e.level===a.level));if(a.remain+s.num*n>=s.exp&&s.exp){a.level+=1;const e=t.find((e=>e.level===a.level));a.num=e.num,a.exp=a.exp+e.num*n,a.remain=a.remain+e.num*n-s.exp}else a.exp=a.exp+s.num*n,a.remain=a.remain+s.num*n;return c.isToday()&&(N.value=a),[...l,a]}{const e={day:_,date:c.format("YYYY/MM/DD"),level:s,num:u,exp:n*u,remain:n*u-a};return c.isToday()&&(N.value=e),[e]}}),null);C.value=r.reverse()};(()=>{const e=d(D);e?(E.value={...e,timeRange:["2025-11-20",j().format("YYYY-MM-DD")]},U()):(()=>{const e=["2025-11-20",j().format("YYYY-MM-DD")];E.value={createTime:e[0],lostExp:0,timeRange:e},U()})()})();const $=()=>{w(D,E.value),U()};return(e,a)=>{const l=m("my-page-header"),t=c,d=m("uni-datetime-picker"),_=p,w=f,k=m("my-divider"),M=Y,D=m("my-ad-custom"),j=m("my-bottom-safety-space");return o(),s(r,null,[u(l),u(t,{class:"pt_4"},{default:n((()=>[u(t,{class:"mx_4 py_2 shadow radius bg-color"},{default:n((()=>[u(t,{class:"d_flex px_4 pb_2 items_center content_between border_b"},{default:n((()=>[u(t,{class:"grow text_base"},{default:n((()=>[i("战队创建时间")])),_:1}),u(t,{class:"date-picker"},{default:n((()=>[u(d,{modelValue:E.value.createTime,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value.createTime=e),type:"date",returnType:"string",start:E.value.timeRange[0],end:E.value.timeRange[1],onChange:$},null,8,["modelValue","start","end"])])),_:1})])),_:1}),u(t,{class:"d_flex px_4 py_2 items_center content_between border_b"},{default:n((()=>[u(t,{class:"grow"},{default:n((()=>[i("历史亏损经验")])),_:1}),u(t,{class:"date-picker"},{default:n((()=>[u(_,{modelValue:E.value.lostExp,"onUpdate:modelValue":a[1]||(a[1]=e=>E.value.lostExp=e),class:"text_right",type:"number",onBlur:$},null,8,["modelValue"])])),_:1})])),_:1}),u(t,{class:"d_flex px_4 items_center border_b"},{default:n((()=>[u(t,{class:"py_2"},{default:n((()=>[i(" 战队创建第 "),u(w,{class:"text-error"},{default:n((()=>[i(v(N.value.day),1)])),_:1}),i(" 天，等级: "),u(w,{class:"text-error"},{default:n((()=>[i(v(N.value.level),1)])),_:1}),i(" ，经验: "),u(w,{class:"text-error"},{default:n((()=>[i(v(N.value.remain),1)])),_:1})])),_:1})])),_:1}),u(t,{class:"d_flex px_4 items_center border_b"},{default:n((()=>[q.value.level?(o(),x(t,{key:0,class:"py_2"},{default:n((()=>[i(" 下一级: "),u(w,{class:"text-error"},{default:n((()=>[i("Lv."+v(q.value.level),1)])),_:1}),i(" ，预计升级时间："),u(w,{class:"text-error"},{default:n((()=>[i(v(q.value.date),1)])),_:1})])),_:1})):(o(),x(t,{key:1,class:"py_2"},{default:n((()=>[i("当前已满级")])),_:1}))])),_:1}),u(t,{class:"d_flex px_4 items_center content_between"},{default:n((()=>[u(t,{class:"pt_2"},{default:n((()=>[i(" 本期Boss: "),u(w,{class:"text-error"},{default:n((()=>[i(v(V.value.boss),1)])),_:1})])),_:1}),u(t,{class:"pt_2"},{default:n((()=>[i(" 下期Boss: "),u(w,{class:"text-error"},{default:n((()=>[i(v(V.value.nextBoss),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(k,{content:"每日获得的经验上限为战队人数上限乘 210"}),u(k,{content:"历史亏损经验为战队过去所有亏损的经验总和"}),u(k,{content:"为便于统计，亏损叠加在第一天的经验中"}),u(t,{class:"mx_4 mb_4 shadow radius bg-color"},{default:n((()=>[u(t,{class:"d_flex px_4 items_center"},{default:n((()=>[u(t,{class:"py_2"},{default:n((()=>[i("升级列表")])),_:1})])),_:1}),I.value.length?(o(),x(t,{key:0,class:"mytable d_table w_100p pb_2"},{default:n((()=>[u(t,{class:"d_table_row"},{default:n((()=>[u(t,{class:"d_table_cell"},{default:n((()=>[i("天数")])),_:1}),u(t,{class:"d_table_cell"},{default:n((()=>[i("等级")])),_:1}),u(t,{class:"d_table_cell text_center"},{default:n((()=>[i("人数")])),_:1}),u(t,{class:"d_table_cell text_right"},{default:n((()=>[i("剩余经验")])),_:1}),u(t,{class:"d_table_cell text_right"},{default:n((()=>[i("日期")])),_:1})])),_:1}),(o(!0),s(r,null,y(I.value,((e,a)=>(o(),s(r,{key:a},[e.showMore?(o(),x(t,{key:0,class:"d_table_row text_center"},{default:n((()=>[i("显示更多")])),_:1})):(o(),x(t,{key:1,class:g(["d_table_row",[N.value.date===e.date?"istoday":""]])},{default:n((()=>[u(t,{class:"d_table_cell"},{default:n((()=>[i(v(e.day),1)])),_:2},1024),u(t,{class:"d_table_cell"},{default:n((()=>[i("Lv."+v(e.level),1)])),_:2},1024),u(t,{class:"d_table_cell text_center"},{default:n((()=>[i(v(e.num),1)])),_:2},1024),u(t,{class:"d_table_cell text_right"},{default:n((()=>[i(v(e.remain),1)])),_:2},1024),u(t,{class:"d_table_cell text_right"},{default:n((()=>[i(v(e.date),1)])),_:2},1024)])),_:2},1032,["class"]))],64)))),128))])),_:1})):(o(),x(t,{key:1,class:"mx_4 my_4 py_4"},{default:n((()=>[u(t,{class:"text_center text_xxl font_bold mb_4"},{default:n((()=>[i("暂无数据")])),_:1})])),_:1})),L.value?(o(),x(t,{key:2,class:"pb_2",onClick:a[2]||(a[2]=e=>L.value=!L.value)},{default:n((()=>[u(t,{class:"text_center"},{default:n((()=>[i("查看更多")])),_:1})])),_:1})):b("",!0)])),_:1}),u(t,{class:"yang-fab d_flex vertical items_end gap_2"},{default:n((()=>[(o(!0),s(r,null,y(h(z),((e,a)=>(o(),x(M,{key:a,url:e.url,class:"yang-button primary round text_size_sm h_unset px_3 py_2 m_0"},{default:n((()=>[i(v(e.label),1)])),_:2},1032,["url"])))),128))])),_:1}),u(k,{content:"数据仅供参考，具体以游戏内为准。"}),u(D,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),u(j,{version:""})])),_:1})],64)}}},[["__scopeId","data-v-d8cc75bf"]]);export{j as default};
