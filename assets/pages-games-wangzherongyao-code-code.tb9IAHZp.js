import{_ as a,r as e,N as t,ab as s,A as l,B as o,ao as c,q as n,c as r,a as u,w as i,F as d,C as m,D as _,E as f,i as b,b as y,o as p,g,h as v,e as x,m as h,n as w,t as T,f as D,a8 as k,z as C}from"./index-BgZ2wyPS.js";import{a as G}from"./config.HomzqitU.js";const M=a({__name:"code",setup(a){const M=f("dayjs");uni.$sharePageTitle=`王者荣耀口令码-${G}`;const z=e([]),I=e({page:1,size:50,total:0}),j=t({getDataTime:0,countdown:0,autoGetDataTimer:0,autoGetDataInterval:18e4,manualGetDataInterval:6e4}),q=s((()=>{const{page:a,size:e}=I.value;return z.value.slice(0,e*a)})),A=()=>{const a=Date.now(),e=(j.getDataTime+j.manualGetDataInterval-a)/1e3;clearTimeout(j.autoGetDataTimer),j.countdown=Math.floor(e),Math.floor(e)>0&&(j.autoGetDataTimer=setTimeout((()=>{A()}),1e3-a%1e3))},H=()=>{j.countdown||(m({title:"加载中..."}),_(),z.value=new Array(50).fill(1).map(((a,e)=>({code:new Array(8).fill(1).map((a=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[Math.floor(52*Math.random())])).join(""),createTime:Date.now()-Math.floor(24*Math.random()*60*60*1e3)}))).sort(((a,e)=>M(e.createTime).valueOf()-M(a.createTime).valueOf())),j.getDataTime=Date.now(),A())};return l((()=>{H()})),o((()=>{clearTimeout(j.autoGetDataTimer)})),c((async()=>{const{size:a,page:e,total:t}=I.value;t<a*e?n({title:"没有更多数据了，刷新看看",icon:"none"}):I.value.page++})),(a,e)=>{const t=y("my-page-header"),s=b,l=h,o=y("my-divider"),c=y("my-ad-custom"),m=y("my-bottom-safety-space");return p(),r(d,null,[u(t),u(s,{class:"pt_4"},{default:i((()=>[u(s,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[u(s,{class:"d_flex px_4 py_2 items_center border_b"},{default:i((()=>[u(s,{class:"grow"},{default:i((()=>[x("王者荣耀口令码（测试）")])),_:1}),u(l,{class:w(["yang-button primary extra-small text",{disabled:j.countdown}]),onClick:H},{default:i((()=>[u(s,{class:"my-icon my-icon-refresh"}),u(s,{class:"ml_1"},{default:i((()=>[x(T(j.countdown||""),1)])),_:1})])),_:1},8,["class"])])),_:1}),(p(!0),r(d,null,D(q.value,((a,e)=>(p(),g(s,{key:e,class:w(["d_flex px_4 py_2 items_center border_b",[e%2?"":"zebra-stripes",e===q.value.length-1?"radius_b":""]]),"hover-class":"bg-hover",onClick:e=>(async a=>{C({data:a.uid,success:()=>{n({title:"已复制到剪贴板",icon:"success"})},fail:()=>{n({title:"复制失败，请检查设备微信权限。",icon:"none"})}})})(a)},{default:i((()=>[u(s,{class:"grow"},{default:i((()=>[u(s,{class:""},{default:i((()=>[x(T(a.code),1)])),_:2},1024)])),_:2},1024),u(s,{class:""},{default:i((()=>[u(s,null,{default:i((()=>[x(T(k(M)(a.createTime).format("HH:mm:ss")),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),q.value.length?v("",!0):(p(),g(s,{key:0,class:"mx_4 my_4 py_4"},{default:i((()=>[u(s,{class:"text_center text_xxl font_bold mb_4"},{default:i((()=>[x("暂无口令码")])),_:1}),u(s,{class:"text_center text_xxl font_bold mb_4"},{default:i((()=>[x("快来添加吧")])),_:1}),u(l,{class:"yang-button primary outline block","hover-class":"hover",onClick:a.handleSignInClick},{default:i((()=>[x("签到上榜")])),_:1},8,["onClick"])])),_:1}))])),_:1}),u(s,{class:"fab-button yang-fab d_flex vertical items_end"},{default:i((()=>[u(s,{class:w(["yang-button primary round",{disabled:j.countdown}]),onClick:H},{default:i((()=>[u(s,{class:"my-icon my-icon-refresh mb_1"}),u(s,null,{default:i((()=>[x(T(j.countdown||"")+"刷新数据",1)])),_:1})])),_:1},8,["class"])])),_:1}),u(o,{content:"本功能仅为资源整合，具体以游戏内为准。"}),u(c,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"b1941c2542c923916cebc478ceaff137",type:"card",custom_class:"px_4 mb_4 h_50"}),u(m,{version:""})])),_:1})],64)}}},[["__scopeId","data-v-465824d6"]]);export{M as default};
