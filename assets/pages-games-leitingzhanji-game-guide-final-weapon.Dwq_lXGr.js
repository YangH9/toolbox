import{_ as e,r as a,a6 as l,ab as t,c as s,a as u,w as i,F as n,i as c,b as _,o as d,g as o,h as r,f,n as v,e as p,t as m,d as b,a8 as x,ac as y,L as g}from"./index-B0Uwg-IL.js";import{a as k}from"./config.CXGNUSHW.js";import{f as w}from"./data-all.CXzq-oC1.js";import{d as q}from"./data-map-image.CUTvkiiF.js";import"./image.zOWBe0cW.js";const h=e({__name:"final-weapon",setup(e){uni.$sharePageTitle=`最终兵器-${k}`;const h=e=>`/static/web/leitingzhanji/weapon/${e}.png`,$=w.partData.map((e=>e.combat)),L=a({list:[{label:"套系",value:"suit"},{label:"品阶",value:"quality"}],active:"suit"}),S=a({list:[],active:""}),C=a({list:[],active:""}),j=a([]),N=a({}),O=a(null),z=a({}),J=[{label:"普通装备",url:"/pages/games/leitingzhanji/game-guide/equipment-ordinary"},{label:"战神装备",url:"/pages/games/leitingzhanji/game-guide/equipment-ares"},{label:"驾驶员",url:"/pages/games/leitingzhanji/game-guide/driver"},{label:"超维原晶",url:"/pages/games/leitingzhanji/game-guide/original-crystal"},{label:"最终兵器",url:"/pages/games/leitingzhanji/game-guide/final-weapon"}].filter((e=>[...l()].at(-1).route!==e.url.replace(/^\//,""))),M=a(!0),D=t((()=>{const{active:e}=L.value,{active:a}=S.value,{active:l}=C.value;return j.value.filter((t=>"suit"===e?t.suit===a:"quality"!==e||t.quality===l)).sort(((a,l)=>"suit"===e?a.suit-l.suit||l.quality-a.quality||l.level-a.level:"quality"===e?l.quality-a.quality||a.suit-l.suit||l.level-a.level:0))}));(()=>{const{partData:e,finalWeaponOption:a,finalWeaponList:l}=JSON.parse(JSON.stringify(w));S.value.list=a.suit.map((e=>({label:e.label,value:e.value}))),S.value.active=S.value.list[0].value,C.value.list=a.quality.map((e=>({label:e.label,value:e.value}))).reverse(),C.value.active=C.value.list[0].value,j.value=l.map((l=>a.quality.map(((t,s)=>{const u=l.skillEffect[s];return t.gradation.map(((i,n)=>{const c=a.attribute[s][n].at(-1),_=e.map((e=>2===e.value?c.health:e.value===l.attackPart?c.attack:0)),d=l.superSkillEffect.find((e=>e.gradation===i.value&&e.quality===t.value))||{level:0,command:"",description:""},o=(null==i?void 0:i.isMax)?"MAX":i.value?`+${i.value}`:"";return{label:l.title,key:`weapon-${l.suit}-${t.value}-${i.value}`,imgKey:`weapon-${l.suit}-${t.value||1}`,suit:l.suit,level:c.level,maxLevel:i.maxLevel,combat:_,combatNum:Math.round(_.reduce(((e,a,l)=>e+a*$[l]),0)),combatLabel:`${e.find((e=>e.value===l.attackPart)).label}攻击: ${c.attack}, 装甲生命: ${c.health}`,quality:t.value,qualityKey:`weapon-bg-${t.value||1}`,qualityLabel:t.label,gradation:i.value,gradationLabel:o,qualitygradationLabel:`${t.label}${o}`,scoreMarkupLabel:`${(100*c.scoreMarkup).toFixed(0)}%`,description:l.description,advance:["structure","chaoxuan"].filter((e=>i.advance[e])).map((e=>`${a.material[e].label} * ${i.advance[e]}`)),skillName:l.skillName,skillLevel:u.level,skillCommand:u.command,skillDescription:u.description,superSkill:!!d.level,superSkillLevel:d.level,superSkillCommand:d.command,superSkillDescription:d.description}}))})))).flat(2);const{weapon:t,quality:s}=JSON.parse(JSON.stringify(q));N.value={...t,...s}})();const F=()=>{M.value=!M.value},K=t((()=>{const{finalWeaponOption:e}=JSON.parse(JSON.stringify(w)),a=e.quality,l=e.material;return a.map((e=>e.gradation.map((a=>({label:`${e.label}${a.isMax?"MAX":a.value?`+${a.value}`:""}`,level:a.maxLevel,advance:Object.entries(a.advance).map((([e,a])=>a?`${a}*${l[e].label}`:null)).filter((e=>e)),upgrade:Object.entries(a.upgrade).map((([e,a])=>a?`${a}*${l[e].label}`:null)).filter((e=>e))}))))).flat(1)})),P=a(null),A=()=>{P.value.open()};return(e,a)=>{const l=_("my-page-header"),t=c,k=b,w=y,q=g,$=_("my-divider"),j=_("my-ad-custom"),N=_("uni-popup"),W=_("my-bottom-safety-space");return d(),s(n,null,[u(l),u(t,{class:"pt_4"},{default:i((()=>[u(t,{class:"mx_4 shadow radius bg-color py_2 mb_4"},{default:i((()=>[u(t,{class:"yang-nav-tabs evenly px_3 py_1"},{default:i((()=>[(d(!0),s(n,null,f(L.value.list,((e,a)=>(d(),o(t,{key:a,class:v(["yang-tabs__item",L.value.active===e.value?"active":""]),onClick:a=>L.value.active=e.value},{default:i((()=>[p(m(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),"suit"===L.value.active?(d(),o(t,{key:0,class:"yang-nav-tabs swipeable scroll_x mx_2 px_0 py_1 border_b"},{default:i((()=>[(d(!0),s(n,null,f(S.value.list,((e,a)=>(d(),o(t,{key:a,class:v(["yang-tabs__item",S.value.active===e.value?"active":""]),onClick:a=>S.value.active=e.value},{default:i((()=>[p(m(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):r("",!0),"quality"===L.value.active?(d(),o(t,{key:1,class:"yang-nav-tabs swipeable scroll_x mx_2 px_0 py_1 border_b"},{default:i((()=>[(d(!0),s(n,null,f(C.value.list,((e,a)=>(d(),o(t,{key:a,class:v(["yang-tabs__item",C.value.active===e.value?"active":""]),onClick:a=>C.value.active=e.value},{default:i((()=>[p(m(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):r("",!0),u(t,{class:"d_flex wrap px_2 pb_1 main_box"},{default:i((()=>[(d(!0),s(n,null,f(D.value,((e,a)=>(d(),o(t,{key:a,class:"col_3 d_flex vertical px_1 py_2","hover-class":"bg-hover",onClick:a=>(e=>{var a;"trial"!==(null==(a=uni.getAccountInfoSync)?void 0:a.call(uni).miniProgram.envVersion)&&(O.value.open(),z.value=JSON.parse(JSON.stringify(e)))})(e)},{default:i((()=>[u(t,{class:"main_picture_box mb_1 mx_auto"},{default:i((()=>{return[u(k,{class:"yang-avatar main_picture_background",src:(a=e.qualityKey,`/static/web/leitingzhanji/quality/${a}.png`),mode:"aspectFill"},null,8,["src"]),u(k,{class:"yang-avatar main_picture",src:h(e.imgKey),mode:"aspectFill"},null,8,["src"])];var a})),_:2},1024),u(t,{class:"text_nowrap text_center"},{default:i((()=>[p(m(e.label),1)])),_:2},1024),u(t,{class:"px_2 text_xs"},{default:i((()=>[u(t,{class:"d_flex content_center"},{default:i((()=>[u(t,{class:""},{default:i((()=>[p(m(e.qualitygradationLabel),1)])),_:2},1024)])),_:2},1024),M.value?(d(),s(n,{key:0},[u(t,{class:"d_flex content_between"},{default:i((()=>[u(t,{class:"text-info"},{default:i((()=>[p("Lv.")])),_:1}),u(t,{class:""},{default:i((()=>[p(m(e.level)+"/"+m(e.maxLevel),1)])),_:2},1024)])),_:2},1024),u(t,{class:"d_flex content_between"},{default:i((()=>[u(t,{class:"text-info"},{default:i((()=>[p("战力")])),_:1}),u(t,{class:""},{default:i((()=>[p(m(e.combatNum),1)])),_:2},1024)])),_:2},1024)],64)):r("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),u(t,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[u(t,{class:"d_flex px_4 items_center"},{default:i((()=>[u(t,{class:"py_4 grow"},{default:i((()=>[p("内容数据收集中，敬请期待")])),_:1})])),_:1})])),_:1}),u(t,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[u(t,{class:"d_flex px_4 items_center",onClick:A},{default:i((()=>[u(t,{class:"py_4 grow"},{default:i((()=>[p("养成消耗")])),_:1})])),_:1})])),_:1}),u(t,{class:"yang-fab d_flex vertical items_end gap_2"},{default:i((()=>[u(t,{class:"yang-button primary round text_size_sm h_unset px_3 py_2 m_0",onClick:A},{default:i((()=>[u(t,null,{default:i((()=>[p("养成消耗")])),_:1})])),_:1}),(d(!0),s(n,null,f(x(J),((e,a)=>(d(),o(w,{key:a,url:e.url,class:"yang-button primary round text_size_sm h_unset px_3 py_2 m_0"},{default:i((()=>[p(m(e.label),1)])),_:2},1032,["url"])))),128)),u(t,{class:"yang-button primary round text_size_sm h_unset px_3 py_2 m_0",onClick:F},{default:i((()=>[u(t,{class:v(`my-icon my-icon-${M.value?"browse-off":"browse"} mr_2`)},null,8,["class"]),u(t,null,{default:i((()=>[p(m(M.value?"隐藏":"显示")+"战力",1)])),_:1})])),_:1})])),_:1}),u(N,{ref_key:"detailRef",ref:O},{default:i((()=>[u(t,{class:"bg-color radius",style:{"max-width":"80vw"}},{default:i((()=>[u(t,{class:"d_flex vertical px_4 py_3"},{default:i((()=>[u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("名称：")])),_:1}),p(m(z.value.label),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("等级：")])),_:1}),p("Lv."+m(z.value.level)+"/"+m(z.value.maxLevel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("分数加成：")])),_:1}),p(m(z.value.scoreMarkupLabel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("等阶：")])),_:1}),p(m(z.value.qualitygradationLabel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("战力：")])),_:1}),p(m(z.value.combatNum),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("属性：")])),_:1}),p(m(z.value.combatLabel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("进阶消耗：")])),_:1}),u(t,{class:"text_right"},{default:i((()=>[(d(!0),s(n,null,f(z.value.advance,((e,a)=>(d(),o(t,{key:a},{default:i((()=>[p(m(e),1)])),_:2},1024)))),128))])),_:1})])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info text_nowrap"},{default:i((()=>[p("介绍：")])),_:1}),p(m(z.value.description),1)])),_:1})])),_:1}),u($,{content:"常规驱动（普通技能）"}),u(t,{class:"d_flex vertical px_4 py_3"},{default:i((()=>[u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("名称：")])),_:1}),p(m(z.value.skillName),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("等级：")])),_:1}),p(m(z.value.skillLevel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("触发条件：")])),_:1}),p(m(z.value.skillCommand),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info text_nowrap"},{default:i((()=>[p("效果：")])),_:1}),p(m(z.value.skillDescription),1)])),_:1})])),_:1}),z.value.superSkill?(d(),s(n,{key:0},[u($,{content:"超载驱动（终极技能）"}),u($,{content:"仅主战生效，传说品质解锁"}),u(t,{class:"d_flex vertical px_4 py_3"},{default:i((()=>[u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("等级：")])),_:1}),p(m(z.value.superSkillLevel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("触发条件：")])),_:1}),p(m(z.value.superSkillCommand),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info text_nowrap"},{default:i((()=>[p("效果：")])),_:1}),p(m(z.value.superSkillDescription),1)])),_:1})])),_:1})],64)):r("",!0)])),_:1}),u(j,{mp_weixin:"adunit-a4678d8d13df3114",mp_qq:"c74f0b30cbf1b82004c9c785b7afc1c0",custom_class:"p_0 mx_0 mt_4"})])),_:1},512),u(N,{ref_key:"consumeDialogRef",ref:P},{default:i((()=>[u(t,{class:"dialog_box bg-color radius py_3"},{default:i((()=>[u(t,{class:"d_flex center px_4"},{default:i((()=>[u(t,null,{default:i((()=>[p("养成消耗")])),_:1})])),_:1}),u($,{content:"品阶/等级，进阶下一级所需材料"}),u(t,{class:"d_table w_100p px_4"},{default:i((()=>[u(t,{class:"d_table_row"},{default:i((()=>[u(t,{class:"d_table_cell"},{default:i((()=>[p("等阶")])),_:1}),u(t,{class:"d_table_cell text_center"},{default:i((()=>[p("等级")])),_:1}),u(t,{class:"d_table_cell text_center"},{default:i((()=>[p("进阶消耗")])),_:1}),u(t,{class:"d_table_cell text_right"},{default:i((()=>[p("升级消耗")])),_:1})])),_:1}),(d(!0),s(n,null,f(K.value,((e,a)=>(d(),o(t,{key:a,class:"d_table_row text_xs"},{default:i((()=>[u(t,{class:"d_table_cell middle"},{default:i((()=>[p(m(e.label),1)])),_:2},1024),u(t,{class:"d_table_cell middle text_center"},{default:i((()=>[p(m(e.level),1)])),_:2},1024),u(t,{class:"d_table_cell middle text_center"},{default:i((()=>[(d(!0),s(n,null,f(e.advance,((e,a)=>(d(),o(t,{key:a},{default:i((()=>[p(m(e),1)])),_:2},1024)))),128))])),_:2},1024),u(t,{class:"d_table_cell middle text_right"},{default:i((()=>[(d(!0),s(n,null,f(e.upgrade,((e,a)=>(d(),o(t,{key:a},{default:i((()=>[p(m(e),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1}),u($,{content:"数据持续更新中，可联系作者更新补充。"})])),_:1}),u(j,{mp_weixin:"adunit-a4678d8d13df3114",mp_qq:"c74f0b30cbf1b82004c9c785b7afc1c0",custom_class:"p_0 mx_0 mt_4"})])),_:1},512),u($,{content:"本页内容仅供参考，具体以官方数据为准。"}),u(j,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),u(W,{version:""})])),_:1})],64)}}},[["__scopeId","data-v-3215435b"]]);export{h as default};
