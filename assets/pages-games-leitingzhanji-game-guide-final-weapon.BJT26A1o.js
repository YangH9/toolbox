import{_ as e,r as l,a6 as a,ab as t,c as s,a as u,w as i,F as n,i as c,b as _,o as d,g as o,h as r,f,n as v,e as p,t as m,d as b,a8 as x,ac as y,L as g}from"./index-pljjFqV_.js";import{a as k}from"./config.CXGNUSHW.js";import{f as w}from"./data-all.DPtScL1J.js";import{d as q}from"./data-map-image.CUTvkiiF.js";import"./image.zOWBe0cW.js";const h=e({__name:"final-weapon",setup(e){uni.$sharePageTitle=`最终兵器-${k}`;const h=e=>`/static/web/leitingzhanji/weapon/${e}.png`,$=w.partData.map((e=>e.combat)),S=l({list:[{label:"套系",value:"suit"},{label:"品阶",value:"quality"}],active:"suit"}),L=l({list:[],active:""}),j=l({list:[],active:""}),C=l([]),N=l({}),O=l(null),z=l({}),J=[{label:"普通装备",url:"/pages/games/leitingzhanji/game-guide/equipment-ordinary"},{label:"战神装备",url:"/pages/games/leitingzhanji/game-guide/equipment-ares"},{label:"驾驶员",url:"/pages/games/leitingzhanji/game-guide/driver"},{label:"超维原晶",url:"/pages/games/leitingzhanji/game-guide/original-crystal"},{label:"最终兵器",url:"/pages/games/leitingzhanji/game-guide/final-weapon"}].filter((e=>[...a()].at(-1).route!==e.url.replace(/^\//,""))),D=t((()=>{const{active:e}=S.value,{active:l}=L.value,{active:a}=j.value;return C.value.filter((t=>"suit"===e?t.suit===l:"quality"!==e||t.quality===a)).sort(((l,a)=>"suit"===e?l.suit-a.suit||a.quality-l.quality||a.level-l.level:"quality"===e?a.quality-l.quality||l.suit-a.suit||a.level-l.level:0))}));(()=>{const{partData:e,finalWeaponOption:l,finalWeaponList:a}=JSON.parse(JSON.stringify(w));L.value.list=l.suit.map((e=>({label:e.label,value:e.value}))),L.value.active=L.value.list[0].value,j.value.list=l.quality.map((e=>({label:e.label,value:e.value}))).reverse(),j.value.active=j.value.list[0].value,C.value=a.map((a=>l.quality.map(((t,s)=>{const u=a.skillEffect[s];return t.gradation.map(((i,n)=>{const c=l.attribute[s][n].at(-1),_=e.map((e=>2===e.value?c.health:e.value===a.attackPart?c.attack:0)),d=a.superSkillEffect.find((e=>e.gradation===i.value&&e.quality===t.value))||{level:0,command:"",description:""};return{label:a.title,key:`weapon-${a.suit}-${t.value}-${i.value}`,imgKey:`weapon-${a.suit}-${t.value||1}`,suit:a.suit,level:c.level,maxLevel:i.maxLevel,scoreMarkup:c.scoreMarkup,combat:_,combatNum:Math.round(_.reduce(((e,l,a)=>e+l*$[a]),0)),combatLabel:`${e.find((e=>e.value===a.attackPart)).label}攻击: ${c.attack}, 装甲生命: ${c.health}`,quality:t.value,qualityKey:`weapon-bg-${t.value||1}`,qualityLabel:`${t.label}${i.isMax?" MAX":i.value?` +${i.value}`:""}`,description:a.description,skillName:a.skillName,skillLevel:u.level,skillCommand:u.command,skillDescription:u.description,superSkill:!!d.level,superSkillLevel:d.level,superSkillCommand:d.command,superSkillDescription:d.description}}))})))).flat(2);const{weapon:t,quality:s}=JSON.parse(JSON.stringify(q));N.value={...t,...s}})();const M=t((()=>{const{finalWeaponOption:e}=JSON.parse(JSON.stringify(w)),l=e.quality,a=e.material;return l.map((e=>e.gradation.map((l=>({label:`${e.label}${l.isMax?"MAX":l.value?`+${l.value}`:""}`,level:l.maxLevel,advance:Object.entries(l.advance).map((([e,l])=>l?`${l}*${a[e].label}`:null)).filter((e=>e)),upgrade:Object.entries(l.upgrade).map((([e,l])=>l?`${l}*${a[e].label}`:null)).filter((e=>e))}))))).flat(1)})),K=l(null),P=()=>{K.value.open()};return(e,l)=>{const a=_("my-page-header"),t=c,k=b,w=y,q=g,$=_("my-divider"),C=_("uni-popup"),N=_("my-ad-custom"),A=_("my-bottom-safety-space");return d(),s(n,null,[u(a),u(t,{class:"pt_4"},{default:i((()=>[u(t,{class:"mx_4 shadow radius bg-color py_2 mb_4"},{default:i((()=>[u(t,{class:"yang-nav-tabs evenly px_3 py_1"},{default:i((()=>[(d(!0),s(n,null,f(S.value.list,((e,l)=>(d(),o(t,{key:l,class:v(["yang-tabs__item",S.value.active===e.value?"active":""]),onClick:l=>S.value.active=e.value},{default:i((()=>[p(m(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),"suit"===S.value.active?(d(),o(t,{key:0,class:"yang-nav-tabs swipeable scroll_x mx_2 px_0 py_1 border_b"},{default:i((()=>[(d(!0),s(n,null,f(L.value.list,((e,l)=>(d(),o(t,{key:l,class:v(["yang-tabs__item",L.value.active===e.value?"active":""]),onClick:l=>L.value.active=e.value},{default:i((()=>[p(m(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):r("",!0),"quality"===S.value.active?(d(),o(t,{key:1,class:"yang-nav-tabs swipeable scroll_x mx_2 px_0 py_1 border_b"},{default:i((()=>[(d(!0),s(n,null,f(j.value.list,((e,l)=>(d(),o(t,{key:l,class:v(["yang-tabs__item",j.value.active===e.value?"active":""]),onClick:l=>j.value.active=e.value},{default:i((()=>[p(m(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):r("",!0),u(t,{class:"d_flex wrap px_2 pb_1 main_box"},{default:i((()=>[(d(!0),s(n,null,f(D.value,((e,l)=>(d(),o(t,{key:l,class:"col_3 d_flex vertical mt_4 px_1",onClick:l=>(e=>{var l;"trial"!==(null==(l=uni.getAccountInfoSync)?void 0:l.call(uni).miniProgram.envVersion)&&(O.value.open(),z.value=JSON.parse(JSON.stringify(e)))})(e)},{default:i((()=>[u(t,{class:"main_picture_box mb_1 mx_auto"},{default:i((()=>{return[u(k,{class:"yang-avatar main_picture_background",src:(l=e.qualityKey,`/static/web/leitingzhanji/quality/${l}.png`),mode:"aspectFill"},null,8,["src"]),u(k,{class:"yang-avatar main_picture",src:h(e.imgKey),mode:"aspectFill"},null,8,["src"])];var l})),_:2},1024),u(t,{class:"text_nowrap d_flex content_center"},{default:i((()=>[p(m(e.label),1)])),_:2},1024),u(t,{class:"px_2 text_xs"},{default:i((()=>[u(t,{class:"d_flex content_center"},{default:i((()=>[u(t,{class:""},{default:i((()=>[p(m(e.qualityLabel),1)])),_:2},1024)])),_:2},1024),u(t,{class:"d_flex content_between"},{default:i((()=>[u(t,{class:"text-info"},{default:i((()=>[p("Lv.")])),_:1}),u(t,{class:""},{default:i((()=>[p(m(e.level)+"/"+m(e.maxLevel),1)])),_:2},1024)])),_:2},1024),u(t,{class:"d_flex content_between"},{default:i((()=>[u(t,{class:"text-info"},{default:i((()=>[p("战力")])),_:1}),u(t,{class:""},{default:i((()=>[p(m(e.combatNum),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),u(t,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[u(t,{class:"d_flex px_4 items_center"},{default:i((()=>[u(t,{class:"py_4 grow"},{default:i((()=>[p("内容数据收集中，敬请期待")])),_:1})])),_:1})])),_:1}),u(t,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[u(t,{class:"d_flex px_4 items_center",onClick:P},{default:i((()=>[u(t,{class:"py_4 grow"},{default:i((()=>[p("养成消耗")])),_:1})])),_:1})])),_:1}),u(t,{class:"yang-fab d_flex vertical items_end gap_2"},{default:i((()=>[u(t,{class:"yang-button primary round text_size_sm h_unset px_3 py_2 m_0",onClick:P},{default:i((()=>[u(t,null,{default:i((()=>[p("养成消耗")])),_:1})])),_:1}),(d(!0),s(n,null,f(x(J),((e,l)=>(d(),o(w,{key:l,url:e.url,class:"yang-button primary round text_size_sm h_unset px_3 py_2 m_0"},{default:i((()=>[p(m(e.label),1)])),_:2},1032,["url"])))),128))])),_:1}),u(C,{ref_key:"detailRef",ref:O},{default:i((()=>[u(t,{class:"bg-color radius",style:{"max-width":"80vw"}},{default:i((()=>[u(t,{class:"d_flex vertical px_4 py_3"},{default:i((()=>[u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("名称：")])),_:1}),p(m(z.value.label),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("等级：")])),_:1}),p(m(z.value.level)+"/"+m(z.value.maxLevel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("等阶：")])),_:1}),p(m(z.value.qualityLabel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("战力：")])),_:1}),p(m(z.value.combatNum),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("属性：")])),_:1}),p(m(z.value.combatLabel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info text_nowrap"},{default:i((()=>[p("介绍：")])),_:1}),p(m(z.value.description),1)])),_:1})])),_:1}),u($,{content:"常规驱动（普通技能）"}),u(t,{class:"d_flex vertical px_4 py_3"},{default:i((()=>[u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("名称：")])),_:1}),p(m(z.value.skillName),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("等级：")])),_:1}),p(m(z.value.skillLevel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("触发条件：")])),_:1}),p(m(z.value.skillCommand),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info text_nowrap"},{default:i((()=>[p("效果：")])),_:1}),p(m(z.value.skillDescription),1)])),_:1})])),_:1}),z.value.superSkill?(d(),s(n,{key:0},[u($,{content:"超载驱动（终极技能）"}),u($,{content:"仅主战生效，传说品质解锁"}),u(t,{class:"d_flex vertical px_4 py_3"},{default:i((()=>[u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("等级：")])),_:1}),p(m(z.value.superSkillLevel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info"},{default:i((()=>[p("触发条件：")])),_:1}),p(m(z.value.superSkillCommand),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(q,{class:"text-info text_nowrap"},{default:i((()=>[p("效果：")])),_:1}),p(m(z.value.superSkillDescription),1)])),_:1})])),_:1})],64)):r("",!0)])),_:1})])),_:1},512),u(C,{ref_key:"consumeDialogRef",ref:K},{default:i((()=>[u(t,{class:"dialog_box bg-color radius py_3"},{default:i((()=>[u(t,{class:"d_flex center px_4"},{default:i((()=>[u(t,null,{default:i((()=>[p("养成消耗")])),_:1})])),_:1}),u($,{content:"品阶/等级，进阶下一级所需材料"}),u(t,{class:"d_table w_100p px_4"},{default:i((()=>[u(t,{class:"d_table_row"},{default:i((()=>[u(t,{class:"d_table_cell"},{default:i((()=>[p("等阶")])),_:1}),u(t,{class:"d_table_cell text_center"},{default:i((()=>[p("等级")])),_:1}),u(t,{class:"d_table_cell text_center"},{default:i((()=>[p("进阶消耗")])),_:1}),u(t,{class:"d_table_cell text_right"},{default:i((()=>[p("升级消耗")])),_:1})])),_:1}),(d(!0),s(n,null,f(M.value,((e,l)=>(d(),o(t,{key:l,class:"d_table_row text_xs"},{default:i((()=>[u(t,{class:"d_table_cell middle"},{default:i((()=>[p(m(e.label),1)])),_:2},1024),u(t,{class:"d_table_cell middle text_center"},{default:i((()=>[p(m(e.level),1)])),_:2},1024),u(t,{class:"d_table_cell middle text_center"},{default:i((()=>[(d(!0),s(n,null,f(e.advance,((e,l)=>(d(),o(t,{key:l},{default:i((()=>[p(m(e),1)])),_:2},1024)))),128))])),_:2},1024),u(t,{class:"d_table_cell middle text_right"},{default:i((()=>[(d(!0),s(n,null,f(e.upgrade,((e,l)=>(d(),o(t,{key:l},{default:i((()=>[p(m(e),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1}),u($,{content:"数据持续更新中，可联系作者更新补充。"})])),_:1})])),_:1},512),u($,{content:"本页内容仅供参考，具体以官方数据为准。"}),u(N,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),u(A,{version:""})])),_:1})],64)}}},[["__scopeId","data-v-f9190517"]]);export{h as default};
