import{_ as e,r as a,a7 as l,c as t,a as s,w as i,F as n,i as r,b as c,o,e as u,t as d,f as _,g as b,n as p,h as v,y as f,m as x,a8 as m,a9 as h,aa as g}from"./index-BRopYsU_.js";import{a as y}from"./config.Dny4K3GL.js";import{d as k}from"./data-all.ib-T1R7w.js";import{u as I}from"./uni-popup.CmQ9Co4D.js";const L=e({__name:"count-battlevalues",setup(e){uni.$sharePageTitle=`战力计算器-${y}`;const L=k.partData.map((e=>e.combat)),q={true:1,false:.3},M={0:0,1:.1,2:.15,4:.25},C=a([]),w=a([{label:"专属百分比",attack:[0,.07,.115,.205],health:[0,.07,.115,.205],attackLabel:["0%","7%","11.5%","20.5%"],healthLabel:["0%","7%","11.5%","20.5%"],isPercentage:!0},{label:"专属数值",attack:[0,308,516,905],health:[0,6156,10320,18105],attackLabel:["0","308","516","905"],healthLabel:["0","6156","10320","18105"]},{label:"通用百分比",attack:[0,.015,.025,.045],health:[0,.015,.025,.045],attackLabel:["0%","1.5%","2.5%","4.5%"],healthLabel:["0%","1.5%","2.5%","4.5%"],isPercentage:!0},{label:"通用数值",attack:[0,60,121,205],health:[0,1207,2414,4104],attackLabel:["0","60","121","205"],healthLabel:["0","1207","2414","4104"]}]),$=a({label:"皮肤",attack:50,health:1e3}),S=a([]),P=a([]),j={equipment:[{part:1,equiIndex:35,gradaIndex:10,original:[3,3,3,3],hasSkin:1},{part:2,equiIndex:35,gradaIndex:10,original:[3,3,3,3],hasSkin:0},{part:3,equiIndex:35,gradaIndex:10,original:[3,3,3,3],hasSkin:1},{part:4,equiIndex:35,gradaIndex:10,original:[3,3,3,3],hasSkin:1}],pilot:[{pilot:5,combatIndex:25,isMain:1},{pilot:4,combatIndex:25,isMain:0},{pilot:6,combatIndex:25,isMain:0},{pilot:7,combatIndex:25,isMain:0}],core:[{core:5,combatIndex:20},{core:6,combatIndex:20},{core:7,combatIndex:20}]},E=a(null),A=a({visible:!1,editIndex:0,part:0,partLabel:"",equipment:[0,0],original:[0,0,0,0],hasSkin:!1}),O=a(null),T=a({visible:!1,editIndex:0,isMain:!1,pilot:[0],combatIndex:[0]}),X=a(null),D=a({visible:!1,editIndex:0,core:[0],combatIndex:[0]}),H=a({attack:0,health:0,combat:0}),J=a([]),N=a([]),F=a([]);(()=>{const e=k.partData,a=k.planeOption,l=k.aresOption,t=k.driverOption,s=k.planeList,i=k.aresList,n=k.driverList;C.value=e.map(((e,t)=>({label:e.label,part:e.value,children:[s.map(((l,s)=>l.part[t].quality.map(((t,s)=>{let i=a.quality[s];return{label:t,partLabel:e.label,key:`plane-${e.value}-${l.suit}-${i.value}`,part:e.value,quality:i.value,suit:l.suit,children:i.gradation.map(((e,a)=>{const t=e.value?e.isMax?"MAX":`+${e.value}`:"",n=l.combat[s][a].at(-1);return{label:`${i.label}${t}`,value:e.value,isMax:e.isMax,level:e.maxLevel,attack:n.attack,health:n.health}}))}})))),i.map(((a,s)=>a.part[t].quality.map(((t,s)=>{let i=l.quality[s];return{label:t,partLabel:e.label,key:`ares-${e.value}-${a.suit}-${i.value}`,part:e.value,quality:i.value,suit:a.suit,children:i.gradation.map(((e,l)=>{const t=e.value?e.isMax?"MAX":`+${e.value}`:"",n=a.combat[s][l].at(-1);return{label:`${i.label}${t}`,value:e.value,isMax:e.isMax,level:e.maxLevel,attack:n.basicAttack+n.syncAttack,health:n.basicHealth+n.syncHealth}}))}}))))].flat(2)}))),S.value=n.map((e=>{const a=e.potential.length;return{label:e.title,star:e.star,key:"driver",children:t.quality.map(((a,l)=>{const t=e.combat[l].at(-1);return{label:a.label,quality:a.value,level:t.level,combat:t.part}})).concat(e.potential.map(((e,l)=>({label:"潜能"+(l+1===a?"MAX":`${l+1}/${a}`),quality:4,level:90,combat:e.part}))))}})),P.value=n.map((e=>{const a=e.potential.length;return{label:e.stunt,pilot:e.title,star:e.star,key:"core",children:e.potential.map(((e,l)=>({coreLevel:e.coreLevel,label:"潜能"+(l+1===a?"MAX":`${l+1}/${a}`),combat:e.part})))}}))})();l((()=>{j.equipment.forEach(((e,a)=>{A.value={visible:!1,editIndex:a,part:e.part,partLabel:"",equipment:[e.equiIndex,e.gradaIndex],original:e.original,hasSkin:!!e.hasSkin},G()})),j.pilot.forEach(((e,a)=>{T.value={visible:!1,editIndex:a,isMain:0===a,pilot:[e.pilot],combatIndex:[e.combatIndex]},R()})),j.core.forEach(((e,a)=>{D.value={visible:!1,editIndex:a,core:[e.core],combatIndex:[e.combatIndex]},W()}))}));const z=()=>{const e=[0,0,0,0];J.value.forEach(((a,l)=>{e[l]=a.combat,a.hasSkin&&(e[l]+=2===a.part?$.value.health:$.value.attack),N.value.forEach((a=>{e[l]+=Math.round(a.partCombat[l])})),F.value.forEach((a=>{e[l]+=Math.round(a.partCombat[l])}));const t=a.originalCrystal.filter((e=>e.isPercentage)).reduce(((e,a)=>e+a.value),0),s=a.originalCrystal.filter((e=>!e.isPercentage)).reduce(((e,a)=>e+a.value),0);e[l]+=Math.round(e[l]*t),e[l]+=s})),H.value.combat=e.reduce(((e,a,l)=>e+Math.round(a*L[l])),0)};z();const B=e=>{const a=e.currentTarget.dataset.index,l=JSON.parse(JSON.stringify(J.value[a]));A.value={visible:!0,editIndex:a,part:l.part,partLabel:l.partLabel,equipment:[l.equiIndex,l.gradaIndex],original:l.originalIndex,hasSkin:l.hasSkin},E.value.open()},G=()=>{const e=A.value,a=C.value.find((a=>a.part===e.part)).children[e.equipment[0]],l=a.children[e.equipment[1]],t=w.value,s={label:a.label,key:a.key,part:a.part,partLabel:a.partLabel,gradationLabel:l.label,level:l.level,combat:2===e.part?l.health:l.attack,equiIndex:e.equipment[0],gradaIndex:e.equipment[1],originalIndex:e.original,originalCrystal:t.map(((a,l)=>2===e.part?{label:a.healthLabel[e.original[l]],value:a.health[e.original[l]],isPercentage:!!a.isPercentage}:{label:a.attackLabel[e.original[l]],value:a.attack[e.original[l]],isPercentage:!!a.isPercentage})),hasSkin:!!e.hasSkin};J.value[e.editIndex]=s,K(),z()},K=()=>{A.value.visible=!1,E.value.close()},Q=e=>{const a=e.currentTarget.dataset.index,l=N.value[a];T.value={visible:!0,editIndex:a,isMain:l.isMain,pilot:[l.index],combatIndex:[l.combatIndex]},O.value.open()},R=()=>{const e=T.value,a=S.value[e.pilot[0]],l=a.children[e.combatIndex[0]],t={key:a.key,label:a.label,gradationLabel:l.label,level:l.level,index:e.pilot[0],combatIndex:e.combatIndex[0],isMain:e.isMain,quality:l.quality,combat:l.combat.reduce(((a,l,t)=>a+Math.round(l*q[e.isMain]*L[t])),0),partCombat:l.combat.map((a=>Math.round(a*q[e.isMain])))};N.value[e.editIndex]=t,U(),z()},U=()=>{T.value.visible=!1,O.value.close()},V=e=>{const a=e.currentTarget.dataset.index,l=F.value[a];D.value={visible:!0,editIndex:a,core:[l.index],combatIndex:[l.combatIndex]},X.value.open()},W=()=>{const e=D.value,a=P.value[e.core[0]],l=a.children[e.combatIndex[0]],t={key:a.key,label:a.label,pilot:a.pilot,gradationLabel:l.label,level:l.coreLevel,index:e.core[0],combatIndex:e.combatIndex[0],type:e.editIndex+1,combat:l.combat.reduce(((e,a,t)=>e+Math.round(a*M[l.coreLevel]*L[t])),0),partCombat:l.combat.map((e=>Math.round(e*M[l.coreLevel])))};F.value[e.editIndex]=t,Y(),z()},Y=()=>{D.value.visible=!1,X.value.close()};return(e,a)=>{const l=c("my-page-header"),y=r,k=f,L=c("my-divider"),q=c("my-ad-custom"),M=c("my-bottom-safety-space"),$=x,j=h,z=m,Z=g;return o(),t(n,null,[s(l),s(y,{class:"pt_4"},{default:i((()=>[s(y,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[s(y,{class:"d_flex px_4 items_center"},{default:i((()=>[s(y,{class:"py_4 font_bold"},{default:i((()=>[u("总战力")])),_:1}),s(y,{class:"grow"}),s(y,{class:"py_4"},{default:i((()=>[u(d(H.value.combat),1)])),_:1})])),_:1})])),_:1}),s(y,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[(o(!0),t(n,null,_(J.value,((e,a)=>(o(),b(y,{key:a,class:p(["d_flex items_center text_base px_4 p_relative",0===a?"radius_t border_b":a===J.value.length?"radius_b":"border_b"]),"hover-class":"bg-hover","data-index":a,onClick:B},{default:i((()=>[s(y,{class:"my_4 p_relative"},{default:i((()=>[s(y,null,{default:i((()=>[u(d(e.label||e.partLabel),1),s(k,{class:"text_xs text-info"},{default:i((()=>[u(" - "+d(e.gradationLabel)+" - Lv."+d(e.level),1)])),_:2},1024)])),_:2},1024),s(y,{class:"text_xs text-info"},{default:i((()=>[u(d(e.originalCrystal.map((e=>e.label)).join("、")),1)])),_:2},1024),e.hasSkin?(o(),b(y,{key:0,class:"yang-badge basic count circle warning"},{default:i((()=>[u("有皮肤")])),_:1})):v("",!0)])),_:2},1024),s(y,{class:"grow"}),s(y,{class:"text-info text_right"},{default:i((()=>[u(d(e.combat),1)])),_:2},1024),s(y,{class:"yang-badge ribbon"},{default:i((()=>[s(y,{class:"content basic"},{default:i((()=>[u(d(e.partLabel),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","data-index"])))),128))])),_:1}),s(y,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[(o(!0),t(n,null,_(N.value,((e,a)=>(o(),b(y,{key:a,class:p(["d_flex items_center text_base px_4 p_relative",0===a?"radius_t border_b":a===N.value.length?"radius_b":"border_b"]),"hover-class":"bg-hover","data-index":a,onClick:Q},{default:i((()=>[s(y,{class:"my_4 p_relative"},{default:i((()=>[s(y,null,{default:i((()=>[u(d(e.label||(e.isMain?"主驾驶":"副驾驶")),1),s(k,{class:"text_xs text-info"},{default:i((()=>[u(" - "+d(e.gradationLabel)+" - Lv."+d(e.level),1)])),_:2},1024)])),_:2},1024),s(y,{class:"text_xs text-info"},{default:i((()=>[u(d(e.partCombat.join("、")),1)])),_:2},1024)])),_:2},1024),s(y,{class:"grow"}),s(y,{class:"text-info text_right"},{default:i((()=>[u(d(e.combat),1)])),_:2},1024),s(y,{class:"yang-badge ribbon"},{default:i((()=>[s(y,{class:"content basic"},{default:i((()=>[u(d(e.isMain?"主驾驶":"副驾驶"),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","data-index"])))),128))])),_:1}),s(y,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[(o(!0),t(n,null,_(F.value,((e,a)=>(o(),b(y,{key:a,class:p(["d_flex items_center text_base px_4 p_relative",0===a?"radius_t border_b":a===F.value.length?"radius_b":"border_b"]),"hover-class":"bg-hover","data-index":a,onClick:V},{default:i((()=>[s(y,{class:"my_4 p_relative"},{default:i((()=>[s(y,null,{default:i((()=>[u(d(e.label),1),s(k,{class:"text_xs text-info"},{default:i((()=>[u(" - Lv."+d(e.level)+" - "+d(e.pilot)+" - "+d(e.gradationLabel),1)])),_:2},1024)])),_:2},1024),s(y,{class:"text_xs text-info"},{default:i((()=>[u(d(e.partCombat.join("、")),1)])),_:2},1024)])),_:2},1024),s(y,{class:"grow"}),s(y,{class:"text-info text_right"},{default:i((()=>[u(d(e.combat),1)])),_:2},1024),s(y,{class:"yang-badge ribbon"},{default:i((()=>[s(y,{class:"content basic"},{default:i((()=>[u("核心"+d(e.type),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","data-index"])))),128))])),_:1}),s(L,{content:"本页内容仅供参考，具体以官方数据为准。"}),s(q,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),s(M,{version:""}),s(I,{ref_key:"editEquipmentPopup",ref:E,type:"bottom","safe-area":!1,"mask-click":!1},{default:i((()=>[A.value.visible?(o(),b(y,{key:0,class:"bg-color radius_t"},{default:i((()=>[s(y,{class:"d_flex px_4 py_3 items_center"},{default:i((()=>[s(y,{class:"font_bold"},{default:i((()=>[u("修改装备("+d(A.value.partLabel)+")",1)])),_:1}),s(y,{class:"grow"}),s($,{class:"yang-button danger outline extra-small my-icon-delete","hover-class":"hover"})])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s(y,{class:"title"},{default:i((()=>[u("装备")])),_:1}),s(y,{class:"grow"}),s(z,{value:A.value.equipment,class:"popup-picker",onChange:a[0]||(a[0]=e=>A.value.equipment=e.detail.value)},{default:i((()=>[s(j,null,{default:i((()=>{var e;return[(o(!0),t(n,null,_(null==(e=C.value.find((e=>e.part===A.value.part)))?void 0:e.children,((e,a)=>(o(),b(y,{key:a,class:"d_flex center"},{default:i((()=>[u(d(e.label),1)])),_:2},1024)))),128))]})),_:1}),s(j,null,{default:i((()=>{var e;return[(o(!0),t(n,null,_(null==(e=C.value.find((e=>e.part===A.value.part)))?void 0:e.children[A.value.equipment[0]].children,((e,a)=>(o(),b(y,{key:a,class:"d_flex center"},{default:i((()=>[u(d(e.label),1)])),_:2},1024)))),128))]})),_:1})])),_:1},8,["value"])])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s(y,{class:"title"},{default:i((()=>[u("原晶")])),_:1}),s(y,{class:"grow"}),s(z,{value:A.value.original,class:"popup-picker",onChange:a[1]||(a[1]=e=>A.value.original=e.detail.value)},{default:i((()=>[(o(!0),t(n,null,_(w.value,((e,a)=>(o(),b(j,{key:a},{default:i((()=>[2===A.value.part?(o(!0),t(n,{key:0},_(e.healthLabel,((e,a)=>(o(),b(y,{key:a,class:"d_flex center"},{default:i((()=>[u(d(e),1)])),_:2},1024)))),128)):v("",!0),2!==A.value.part?(o(!0),t(n,{key:1},_(e.attackLabel,((e,a)=>(o(),b(y,{key:a,class:"d_flex center"},{default:i((()=>[u(d(e),1)])),_:2},1024)))),128)):v("",!0)])),_:2},1024)))),128))])),_:1},8,["value"])])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s(y,{class:"title"},{default:i((()=>[u("是否有皮肤")])),_:1}),s(y,{class:"grow"}),s(Z,{checked:A.value.hasSkin,onChange:a[2]||(a[2]=e=>A.value.hasSkin=e.detail.value)},null,8,["checked"])])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s($,{class:"yang-button outline block","hover-class":"hover",onClick:K},{default:i((()=>[u("取消")])),_:1}),s($,{class:"yang-button primary block","hover-class":"hover",onClick:G},{default:i((()=>[u("保存")])),_:1})])),_:1}),s(y,{class:"h_safe"})])),_:1})):v("",!0)])),_:1},512),s(I,{ref_key:"editPilotPopup",ref:O,type:"bottom","safe-area":!1,"mask-click":!1},{default:i((()=>[T.value.visible?(o(),b(y,{key:0,class:"bg-color radius_t"},{default:i((()=>[s(y,{class:"d_flex px_4 py_3 items_center"},{default:i((()=>[s(y,{class:"font_bold"},{default:i((()=>[u("修改驾驶员（"+d(T.value.isMain?"主":"副")+"驾驶）",1)])),_:1}),s(y,{class:"grow"}),s($,{class:"yang-button danger outline extra-small my-icon-delete","hover-class":"hover"})])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s(y,{class:"title"},{default:i((()=>[u("驾驶员")])),_:1}),s(y,{class:"grow"}),s(z,{value:T.value.pilot,class:"popup-picker",onChange:a[3]||(a[3]=e=>T.value.pilot=e.detail.value)},{default:i((()=>[s(j,null,{default:i((()=>[(o(!0),t(n,null,_(S.value,((e,a)=>(o(),b(y,{key:a,class:"d_flex center"},{default:i((()=>[u(d(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s(y,{class:"title"},{default:i((()=>[u("等级/潜能")])),_:1}),s(y,{class:"grow"}),s(z,{value:T.value.combatIndex,class:"popup-picker",onChange:a[4]||(a[4]=e=>T.value.combatIndex=e.detail.value)},{default:i((()=>[s(j,null,{default:i((()=>[(o(!0),t(n,null,_(S.value[T.value.pilot[0]].children,((e,a)=>(o(),b(y,{key:a,class:"d_flex center"},{default:i((()=>[u(d(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s($,{class:"yang-button outline block","hover-class":"hover",onClick:U},{default:i((()=>[u("取消")])),_:1}),s($,{class:"yang-button primary block","hover-class":"hover",onClick:R},{default:i((()=>[u("保存")])),_:1})])),_:1}),s(y,{class:"h_safe"})])),_:1})):v("",!0)])),_:1},512),s(I,{ref_key:"editCorePopup",ref:X,type:"bottom","safe-area":!1,"mask-click":!1},{default:i((()=>[D.value.visible?(o(),b(y,{key:0,class:"bg-color radius_t"},{default:i((()=>[s(y,{class:"d_flex px_4 py_3 items_center"},{default:i((()=>[s(y,{class:"font_bold"},{default:i((()=>[u("修改核心矩阵（核心"+d(D.value.editIndex+1)+"）",1)])),_:1}),s(y,{class:"grow"}),s($,{class:"yang-button danger outline extra-small my-icon-delete","hover-class":"hover"})])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s(y,{class:"title"},{default:i((()=>[u("核心名称")])),_:1}),s(y,{class:"grow"}),s(z,{value:D.value.core,class:"popup-picker",onChange:a[5]||(a[5]=e=>D.value.core=e.detail.value)},{default:i((()=>[s(j,null,{default:i((()=>[(o(!0),t(n,null,_(P.value,((e,a)=>(o(),b(y,{key:a,class:"d_flex center"},{default:i((()=>[u(d(e.label)+" - "+d(e.pilot),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s(y,{class:"title"},{default:i((()=>[u("等级/潜能")])),_:1}),s(y,{class:"grow"}),s(z,{value:D.value.combatIndex,class:"popup-picker",onChange:a[6]||(a[6]=e=>D.value.combatIndex=e.detail.value)},{default:i((()=>[s(j,null,{default:i((()=>[(o(!0),t(n,null,_(P.value[D.value.core[0]].children,((e,a)=>(o(),b(y,{key:a,class:"d_flex center"},{default:i((()=>[u("Lv."+d(e.coreLevel)+" -- "+d(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),s(y,{class:"d_flex px_4 py_3 items_center border_t"},{default:i((()=>[s($,{class:"yang-button outline block","hover-class":"hover",onClick:Y},{default:i((()=>[u("取消")])),_:1}),s($,{class:"yang-button primary block","hover-class":"hover",onClick:W},{default:i((()=>[u("保存")])),_:1})])),_:1}),s(y,{class:"h_safe"})])),_:1})):v("",!0)])),_:1},512)])),_:1})],64)}}},[["__scopeId","data-v-60a8cc84"]]);export{L as default};
