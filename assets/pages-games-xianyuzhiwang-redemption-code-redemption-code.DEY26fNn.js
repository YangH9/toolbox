import{_ as a,r as e,l as s,a as t,c as l,w as d,U as r,V as c,s as u,W as o,i,o as n,b as _,d as f,t as p,j as m,R as b,e as v,f as y,F as g,Q as x,h as w,q as h,m as k}from"./index-DG7GS2BU.js";import{a as j,b as T,d as $,c as K}from"./config.B1N9QHK-.js";const M=a({__name:"redemption-code",setup(a){uni.$sharePageTitle=`兑换码-${j}`;const M=`${T}-redemption-code-use`,N=e({updateTime:"",rewardKeyMap:[],data:[]}),q=e(s(M)||[]);r({title:"加载中"}),c({url:`https://runjs.work/transformer/project?id=${$}`,sslVerify:!1,success:a=>{var e,s;const t=null==(s=null==(e=a.data.data)?void 0:e.js)?void 0:s.source;if(t){const a=JSON.parse(t.replace(/\n/g," ").replace(/&quot;/g,'"')),{updateTime:e,rewardKeyMap:s,data:l}=a;N.value.updateTime=e,N.value.rewardKeyMap=s,N.value.data=l.reverse()}else u({title:"资源加载异常",icon:"none"})},complete:()=>{o()}});const V=a=>{const{code:e}=a.currentTarget.dataset;q.value.find((a=>a===e))||q.value.push(e),h(M,q.value),k({data:e,success:()=>{}})};return(a,e)=>{const s=i,r=x,c=t("my-divider"),u=t("my-ad-custom"),o=t("my-bottom-safety-space");return n(),l(s,{class:"pt_4"},{default:d((()=>[_(s,{class:"mx_4 mb_2 shadow radius bg-color"},{default:d((()=>[_(s,{class:"d_flex px_4 py_4 items_center"},{default:d((()=>[_(s,{class:"font_bold grow"},{default:d((()=>[f("兑换码")])),_:1}),N.value.updateTime?(n(),l(s,{key:0},{default:d((()=>[_(r,{class:"mr_2 text-info"},{default:d((()=>[f("更新时间:")])),_:1}),_(r,{class:"text-error font_bold"},{default:d((()=>[f(p(N.value.updateTime),1)])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1}),_(c,null,{default:d((()=>[N.value.data.length?(n(),l(r,{key:0},{default:d((()=>[f("总计"),_(r,{class:"text-primary"},{default:d((()=>[f(p(N.value.data.length),1)])),_:1}),f("个，新增"),_(r,{class:"text-primary"},{default:d((()=>[f(p(N.value.data.filter((a=>a.isNew)).length),1)])),_:1}),f("个，")])),_:1})):m("",!0),f("点击"),_(r,{class:"text-error"},{default:d((()=>[f("复制")])),_:1}),b(K)?(n(),l(r,{key:1},{default:d((()=>[f("并启动"+p(b(j)),1)])),_:1})):m("",!0),f("。 ")])),_:1}),_(s,{class:"mx_4 mb_4 shadow radius bg-color"},{default:d((()=>[(n(!0),v(g,null,y(N.value.data,((a,e)=>(n(),v(g,{key:e},[_(s,{class:w(["d_flex items_center text_base p_4 p_relative",0===e?"radius_t border_b":e===N.value.data.length?"radius_b":"border_b"]),"hover-class":"bg-hover","data-code":a.code,onClick:V},{default:d((()=>[_(s,{class:"p_relative"},{default:d((()=>[f(p(a.code)+" ",1),q.value.includes(a.code)?(n(),l(s,{key:0,class:"yang-badge basic count circle warning"},{default:d((()=>[f("已使用")])),_:1})):m("",!0)])),_:2},1024),_(s,{class:"grow"}),_(s,{class:"text-info text_right"},{default:d((()=>[f(p(a.reward.map(((a,e)=>((a,e)=>e?`${e}${N.value.rewardKeyMap[a]||""}`:"")(e,a))).filter((a=>a)).join("，")),1)])),_:2},1024),a.invalidity?(n(),l(s,{key:0,class:"yang-badge ribbon info"},{default:d((()=>[_(s,{class:"content basic"},{default:d((()=>[f("已失效")])),_:1})])),_:1})):m("",!0),a.forever?(n(),l(s,{key:1,class:"yang-badge ribbon"},{default:d((()=>[_(s,{class:"content basic"},{default:d((()=>[f("永久")])),_:1})])),_:1})):m("",!0),a.isNew?(n(),l(s,{key:2,class:"yang-badge ribbon"},{default:d((()=>[_(s,{class:"content basic"},{default:d((()=>[f("NEW")])),_:1})])),_:1})):m("",!0)])),_:2},1032,["class","data-code"]),!((e-2)%15)&&e<N.value.data.length-15+2?(n(),l(s,{key:0},{default:d((()=>[_(u,{mp_weixin:"adunit-a4678d8d13df3114",custom_class:"p_0 m_0"})])),_:1})):m("",!0)],64)))),128))])),_:1}),_(u,{mp_weixin:"adunit-8c89cc4610403c81"}),_(o,{version:""})])),_:1})}}},[["__scopeId","data-v-73e0d57a"]]);export{M as default};
