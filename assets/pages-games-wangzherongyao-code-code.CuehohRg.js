import{_ as a,r as e,P as t,ad as s,B as l,C as o,aw as n,s as c,c as r,a as u,w as i,F as d,D as m,E as _,G as f,i as b,b as p,o as y,g,h as v,e as x,m as h,n as w,t as T,f as D,aa as k,u as C}from"./index-CjZybeJx.js";import{a as G}from"./config.HomzqitU.js";const M=a({__name:"code",setup(a){const M=f("dayjs");uni.$sharePageTitle=`王者荣耀口令码-${G}`;const I=e([]),j=e({page:1,size:50,total:0}),z=t({getDataTime:0,countdown:0,autoGetDataTimer:0,autoGetDataInterval:18e4,manualGetDataInterval:6e4}),q=s((()=>{const{page:a,size:e}=j.value;return I.value.slice(0,e*a)})),A=()=>{const a=Date.now(),e=(z.getDataTime+z.manualGetDataInterval-a)/1e3;clearTimeout(z.autoGetDataTimer),z.countdown=Math.floor(e),Math.floor(e)>0&&(z.autoGetDataTimer=setTimeout((()=>{A()}),1e3-a%1e3))},H=()=>{z.countdown||(m({title:"加载中..."}),_(),I.value=new Array(50).fill(1).map(((a,e)=>({code:new Array(8).fill(1).map((a=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[Math.floor(52*Math.random())])).join(""),createTime:Date.now()-Math.floor(24*Math.random()*60*60*1e3)}))).sort(((a,e)=>M(e.createTime).valueOf()-M(a.createTime).valueOf())),z.getDataTime=Date.now(),A())};return l((()=>{H()})),o((()=>{clearTimeout(z.autoGetDataTimer)})),n((async()=>{const{size:a,page:e,total:t}=j.value;t<a*e?c({title:"没有更多数据了，刷新看看",icon:"none"}):j.value.page++})),(a,e)=>{const t=p("my-page-header"),s=b,l=h,o=p("my-divider"),n=p("my-ad-custom"),m=p("my-bottom-safety-space");return y(),r(d,null,[u(t),u(s,{class:"pt_4"},{default:i((()=>[u(s,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[u(s,{class:"d_flex px_4 py_2 items_center border_b"},{default:i((()=>[u(s,{class:"grow"},{default:i((()=>[x("王者荣耀口令码（测试）")])),_:1}),u(l,{class:w(["yang-button primary extra-small text",{disabled:z.countdown}]),onClick:H},{default:i((()=>[u(s,{class:"my-icon-refresh"}),u(s,{class:"ml_1"},{default:i((()=>[x(T(z.countdown||""),1)])),_:1})])),_:1},8,["class"])])),_:1}),(y(!0),r(d,null,D(q.value,((a,e)=>(y(),g(s,{key:e,class:w(["d_flex px_4 py_2 items_center border_b",[e%2?"":"zebra-stripes",e===q.value.length-1?"radius_b":""]]),"hover-class":"bg-hover",onClick:e=>(async a=>{C({data:a.uid,success:()=>{c({title:"已复制到剪贴板",icon:"success"})},fail:()=>{c({title:"复制失败，请检查设备微信权限。",icon:"none"})}})})(a)},{default:i((()=>[u(s,{class:"grow"},{default:i((()=>[u(s,{class:""},{default:i((()=>[x(T(a.code),1)])),_:2},1024)])),_:2},1024),u(s,{class:""},{default:i((()=>[u(s,null,{default:i((()=>[x(T(k(M)(a.createTime).format("HH:mm:ss")),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),q.value.length?v("",!0):(y(),g(s,{key:0,class:"mx_4 my_4 py_4"},{default:i((()=>[u(s,{class:"text_center text_xxl font_bold mb_4"},{default:i((()=>[x("暂无口令码")])),_:1}),u(s,{class:"text_center text_xxl font_bold mb_4"},{default:i((()=>[x("快来添加吧")])),_:1}),u(l,{class:"yang-button primary outline block","hover-class":"hover",onClick:a.handleSignInClick},{default:i((()=>[x("签到上榜")])),_:1},8,["onClick"])])),_:1}))])),_:1}),u(s,{class:"fab-button yang-fab d_flex vertical items_end"},{default:i((()=>[u(s,{class:w(["yang-button primary round",{disabled:z.countdown}]),onClick:H},{default:i((()=>[u(s,{class:"my-icon-refresh mb_1"}),u(s,null,{default:i((()=>[x(T(z.countdown||"")+"刷新数据",1)])),_:1})])),_:1},8,["class"])])),_:1}),u(o,{content:"本功能仅为资源整合，具体以游戏内为准。"}),u(n,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),u(m,{version:""})])),_:1})],64)}}},[["__scopeId","data-v-a566998c"]]);export{M as default};
