import{r as e,m as a,c as t,a as l,w as s,F as d,i as u,J as o,b as r,o as c,f as n,g as _,h as f,e as i,t as m,A as y,a6 as b,u as x,p as v,a7 as g,a8 as p,a9 as k,s as h,q as Y,j as T}from"./index-DwV2BAJQ.js";import{a as w,b as M}from"./config.Dny4K3GL.js";const C=36e5,D={__name:"competition",setup(D){const H=o("dayjs");uni.$sharePageTitle=`对战时间记录器-${w}`;const K=`${M}-competition-data`,$=e([{label:"无尽限时小组赛",key:"groupTime",nKey:"groupNoticeTime",oldKey:"xiaozusai",cd:16,date:0,energy:"100"},{label:"无尽争霸赛",key:"battleTime",nKey:"battleNoticeTime",oldKey:"zhengbasai",cd:48,date:0,energy:"300"}]),j=[["今天","昨天"].map(((e,a)=>({label:e,value:-a-1+1}))),Array.from({length:24},((e,a)=>({label:`${a}时`,value:a}))),Array.from({length:60},((e,a)=>({label:`${a}分`,value:a})))],q=e([0,0,0]);let A=0;e(!1);const z=e(a(K).setTimeMode||"manual"),E=[{label:"一键设置当前时间",value:"current"},{label:"手动选择时间",value:"manual"}],N=()=>{const e=H();q.value=[0,e.hour(),e.minute()],A=e.valueOf()-e.hour()*C-6e4*e.minute()-1e3*(e.second()-59)},O=async e=>{const{value:a}=e.detail,{key:t}=e.currentTarget.dataset,l=[24*C,C,6e4],s=j.map((e=>e.map((e=>e.value)))),d=a.reduce(((e,a,t)=>e+s[t][a]*l[t]),A);$.value.find((e=>e.key===t)).date=d,J(t)},F=async e=>{const{key:a}=e.currentTarget.dataset;$.value.find((e=>e.key===a)).date=H().valueOf(),J(a)},J=async e=>{$.value.find((a=>a.key===e));const a={};$.value.forEach((e=>a[e.key]=e.date)),a.setTimeMode=z.value,Y(K,a)},P=e=>{const{index:a}=e.currentTarget.dataset;$.value[a],h({title:"浏览器暂不支持",icon:"none"})},S=e=>{const{value:t}=e.detail;z.value=t;const l=a(K)||{};l.setTimeMode=z.value,Y(K,l)};return(async()=>{const e=a(K);$.value.forEach((a=>{const{key:t,oldKey:l}=a;e&&e[l]&&(a.date=e[l]),e&&e[t]&&(a.date=e[t])}))})(),(e,a)=>{const o=r("my-page-header"),h=r("my-divider"),Y=u,w=y,M=v,D=b,K=k,A=p,J=g,B=r("my-ad-custom"),G=r("my-bottom-safety-space");return c(),t(d,null,[l(o),l(Y,{class:"pt_2"},{default:s((()=>[l(h,{content:"本工具仅作辅助记录时间，具体内容以官方为准。"}),(c(!0),t(d,null,n($.value,((e,a)=>(c(),_(Y,{key:a,class:"mx_4 mb_4 shadow radius bg-color"},{default:s((()=>[l(Y,{class:"d_flex items_center p_4"},{default:s((()=>[l(Y,{class:"grow"},{default:s((()=>[l(Y,{class:"text_base"},{default:s((()=>[i(m(e.label),1)])),_:2},1024),l(Y,{class:"text-info"},{default:s((()=>[i("冷却结束后使用"),l(w,{class:"text-error font_bold px_1"},{default:s((()=>[i(m(e.energy),1)])),_:2},1024),i("体力触发")])),_:2},1024)])),_:2},1024),l(Y,null,{default:s((()=>[i("CD:"),l(w,{class:"text-error font_bold px_1"},{default:s((()=>[i(m(e.cd),1)])),_:2},1024),i("H")])),_:2},1024)])),_:2},1024),"manual"===z.value?(c(),_(D,{key:0,class:"cursor_default",mode:"multiSelector","range-key":"label",value:q.value,range:j,"data-key":e.key,onClick:N,onChange:O},{default:s((()=>[l(Y,{class:"d_flex items_center p_4 border_t"},{default:s((()=>[l(Y,{class:"grow"},{default:s((()=>[l(Y,{class:"text_base"},{default:s((()=>[i("本次点击"),l(w,{class:"text-error font_bold px_1"},{default:s((()=>[i("立即参加")])),_:1}),i("的时间")])),_:1}),e.date?(c(),_(Y,{key:0,class:"text-info"},{default:s((()=>[i(m(x(H)(e.date).format("YYYY/MM/DD HH:mm:ss")),1)])),_:2},1024)):f("",!0)])),_:2},1024),l(Y,null,{default:s((()=>[l(M,{class:"yang-button primary small outline","hover-class":"hover"},{default:s((()=>[i("设置时间")])),_:1})])),_:1})])),_:2},1024)])),_:2},1032,["value","data-key"])):"current"===z.value?(c(),_(Y,{key:1,class:"cursor_default"},{default:s((()=>[l(Y,{class:"d_flex items_center p_4 border_t"},{default:s((()=>[l(Y,{class:"grow"},{default:s((()=>[l(Y,{class:"text_base"},{default:s((()=>[i("本次点击"),l(w,{class:"text-error font_bold px_1"},{default:s((()=>[i("立即参加")])),_:1}),i("的时间")])),_:1}),e.date?(c(),_(Y,{key:0,class:"text-info"},{default:s((()=>[i(m(x(H)(e.date).format("YYYY/MM/DD HH:mm:ss")),1)])),_:2},1024)):f("",!0)])),_:2},1024),l(Y,null,{default:s((()=>[l(M,{class:"yang-button primary small outline","hover-class":"hover","data-key":e.key,onClick:F},{default:s((()=>[i("设置时间")])),_:2},1032,["data-key"])])),_:2},1024)])),_:2},1024)])),_:2},1024)):f("",!0),l(Y,{class:"d_flex items_center p_4 border_t"},{default:s((()=>[l(Y,{class:"grow"},{default:s((()=>[l(Y,{class:"text_base"},{default:s((()=>[i("预估冷却结束时间")])),_:1}),e.date?(c(),_(Y,{key:0,class:"text-info"},{default:s((()=>[i(m(x(H)(e.date+e.cd*C).format("YYYY/MM/DD HH:mm:ss")),1)])),_:2},1024)):f("",!0)])),_:2},1024),e.date?(c(),_(Y,{key:0},{default:s((()=>[l(M,{class:"yang-button primary small outline","hover-class":"hover","data-index":a,onClick:P},{default:s((()=>[i("添加日历")])),_:2},1032,["data-index"])])),_:2},1024)):f("",!0)])),_:2},1024)])),_:2},1024)))),128)),l(J,{class:"mx_4 mb_4 py_1 shadow radius bg-color",onChange:S},{default:s((()=>[(c(),t(d,null,n(E,((e,a)=>l(A,{key:a,class:"d_flex px_4 py_2 items_center border_b"},{default:s((()=>[l(Y,{class:"mr_2"},{default:s((()=>[l(K,{value:e.value,checked:e.value===z.value},null,8,["value","checked"])])),_:2},1024),l(Y,null,{default:s((()=>[i(m(e.label),1)])),_:2},1024)])),_:2},1024))),64))])),_:1}),l(Y,{class:"mx_4 mb_4 shadow radius"},{default:s((()=>[l(Y,{class:"d_flex px_4 items_center radius border_b bg-color","hover-class":"bg-hover",onClick:a[0]||(a[0]=e=>{T({url:"/pages/system/subscribe"})})},{default:s((()=>[l(Y,{class:"my-icon-setting-1 text_xxxl text-primary mr_2"}),l(Y,{class:"grow text_left text_base"},{default:s((()=>[i("提醒管理")])),_:1}),l(Y,{class:"my-icon-chevron-right text_xxl text-info"})])),_:1})])),_:1}),l(B,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),l(G,{version:""})])),_:1})],64)}}};export{D as default};
