import{_ as e,r as a,c as l,a as t,w as s,F as r,i as n,b as i,o as u,e as c,t as o,f as d,g as b,n as _,h as v,m as p,a7 as f,a8 as m,a9 as x}from"./index-DqNUP4pM.js";import{a as y}from"./config.Dny4K3GL.js";import{d as g}from"./data-all.C6iyzAYB.js";import{u as h}from"./uni-popup.Q8xyg9TE.js";const k=e({__name:"count-battlevalues",setup(e){uni.$sharePageTitle=`战力计算器-${y}`;const k=a([]),I=a([{label:"专属百分比",attack:[0,.07,.115,.205],health:[0,.07,.115,.205],isPercentage:!0},{label:"专属数值",attack:[0,308,516,905],health:[0,6156,10320,18105]},{label:"通用百分比",attack:[0,.015,.025,.045],health:[0,.015,.025,.045],isPercentage:!0},{label:"通用数值",attack:[0,60,121,205],health:[0,1207,2414,4104]}]),C=a({label:"皮肤",attack:50,health:1e3}),M=a([]),q=a([]),L=a(null),w=a({visible:!1,editIndex:0,part:0,partLabel:"",equipment:[0,0],original:[0,0,0,0],hasSkin:!1}),P=a(null),$=a({visible:!1,editIndex:0,isMain:!1,pilot:[0],combatIndex:[0]}),A=a(null),S=a({visible:!1,editIndex:0,core:[0],combatIndex:[0]}),X=a({attack:0,health:0,combat:0}),j=a([{key:"",label:"暗夜神锋(MAX)",part:1,partLabel:"战机",combat:6026,equiIndex:35,gradaIndex:10,originalIndex:[3,3,3,3],originalCrystal:[{label:"20.5%",value:.205,isPercentage:!0},{label:"905",value:905},{label:"4.5%",value:.045,isPercentage:!0},{label:"205",value:205}],hasSkin:!0},{key:"",label:"月华之轮(MAX)",part:2,partLabel:"装甲",combat:120578,equiIndex:35,gradaIndex:10,originalIndex:[3,3,3,3],originalCrystal:[{label:"20.5%",value:.205,isPercentage:!0},{label:"18105",value:18105},{label:"4.5%",value:.045,isPercentage:!0},{label:"4104",value:4104}],hasSkin:!1},{key:"",label:"集束光刃(MAX)",part:3,partLabel:"副武器",combat:6026,equiIndex:35,gradaIndex:10,originalIndex:[3,3,3,3],originalCrystal:[{label:"20.5%",value:.205,isPercentage:!0},{label:"905",value:905},{label:"4.5%",value:.045,isPercentage:!0},{label:"205",value:205}],hasSkin:!0},{key:"",label:"超旋奇点(MAX)",part:4,partLabel:"僚机",combat:6026,equiIndex:35,gradaIndex:10,originalIndex:[3,3,3,3],originalCrystal:[{label:"20.5%",value:.205,isPercentage:!0},{label:"905",value:905},{label:"4.5%",value:.045,isPercentage:!0},{label:"205",value:205}],hasSkin:!0}]),O=a([{key:"",label:"莉亚(潜能MAX)",name:"莉亚",index:5,combatIndex:25,level:90,potential:4,isMain:!0,quality:1,combat:4836,partCombat:[1512,18134,1512,906]},{key:"",label:"罗伊(潜能MAX)",name:"罗伊",index:4,combatIndex:25,level:90,potential:4,isMain:!1,quality:1,combat:1451,partCombat:[1512,30248,906,906]},{key:"",label:"维多利亚(潜能MAX)",name:"维多利亚",index:6,combatIndex:25,level:90,potential:4,isMain:!1,quality:1,combat:1451,partCombat:[906,30248,1512,906]},{key:"",label:"娜塔莉(潜能MAX)",name:"娜塔莉",index:7,combatIndex:25,level:90,potential:4,isMain:!1,quality:1,combat:1451,partCombat:[1512,18134,906,1512]}]),E=a([{key:"",label:"希望之光(Lv4)",name:"希望之光",index:5,combatIndex:25,level:4,type:1,typeLabel:"核心1",quality:1,combat:1209,partCombat:[1512,30248,906,906]},{key:"",label:"星辰守护(Lv4)",name:"星辰守护",index:6,combatIndex:25,level:4,type:1,typeLabel:"核心2",quality:1,combat:1209,partCombat:[1512,18134,1512,906]},{key:"",label:"能量倾泻(Lv4)",name:"能量倾泻",index:7,combatIndex:25,level:4,type:1,typeLabel:"核心3",quality:1,combat:1209,partCombat:[1512,18134,906,1512]}]);(()=>{const e=g.partData,a=g.planeOption,l=g.aresOption,t=g.driverOption,s=g.planeList,r=g.aresList,n=g.driverList;k.value=e.map(((e,t)=>({label:e.label,part:e.value,children:[s.map(((l,s)=>l.part[t].quality.map(((t,s)=>{let r=a.quality[s];return{label:t,partLabel:e.label,key:`plane-${e.value}-${l.suit}-${r.value}`,part:e.value,quality:r.value,suit:l.suit,children:r.gradation.map(((e,a)=>{const t=e.value?e.isMax?"MAX":`+${e.value}`:"",n=l.combat[s][a].at(-1);return{label:`${r.label}${t}`,value:e.value,isMax:e.isMax,laval:e.maxLevel,attack:n.attack,health:n.health}}))}})))),r.map(((a,s)=>a.part[t].quality.map(((t,s)=>{let r=l.quality[s];return{label:t,partLabel:e.label,key:`ares-${e.value}-${a.suit}-${r.value}`,part:e.value,quality:r.value,suit:a.suit,children:r.gradation.map(((e,l)=>{const t=e.value?e.isMax?"MAX":`+${e.value}`:"",n=a.combat[s][l].at(-1);return{label:`${r.label}${t}`,value:e.value,isMax:e.isMax,laval:e.maxLevel,attack:n.basicAttack+n.syncAttack,health:n.basicHealth+n.syncHealth}}))}}))))].flat(2)}))),M.value=n.map((e=>{const a=e.potential.length;return{label:e.title,star:e.star,key:"driver",children:t.quality.map(((a,l)=>{const t=e.combat[l].at(-1);return{label:a.label,quality:a.value,level:t.level,combat:t.part}})).concat(e.potential.map(((e,l)=>({label:"潜能"+(l+1===a?"MAX":`(${l+1}/${a})`),quality:4,level:90,combat:e.part}))))}})),q.value=n.map((e=>{const a=e.potential.length;return{label:e.stunt,pilot:e.title,star:e.star,children:e.potential.map(((e,l)=>({coreLevel:e.coreLevel,label:"潜能"+(l+1===a?"MAX":`(${l+1}/${a})`),combat:e.part})))}}))})();(()=>{const e=[0,0,0,0];j.value.forEach(((a,l)=>{e[l]=a.combat,a.hasSkin&&(e[l]+=2===a.part?C.value.health:C.value.attack),O.value.forEach((a=>{a.isMain?e[l]+=Math.round(1*a.partCombat[l]):e[l]+=Math.round(.3*a.partCombat[l])})),E.value.forEach((a=>{e[l]+=Math.round(.25*a.partCombat[l])}));const t=a.originalCrystal.filter((e=>e.isPercentage)).reduce(((e,a)=>e+a.value),0),s=a.originalCrystal.filter((e=>!e.isPercentage)).reduce(((e,a)=>e+a.value),0);e[l]+=~~(e[l]*t),e[l]+=s})),X.value.combat=e[0]+~~(.05004*e[1])+e[2]+e[3]})();const T=e=>{const a=e.currentTarget.dataset.index,l=JSON.parse(JSON.stringify(j.value[a]));w.value={visible:!0,editIndex:a,part:l.part,partLabel:l.partLabel,equipment:[l.equiIndex,l.gradaIndex],original:l.originalIndex,hasSkin:l.hasSkin},L.value.open()},H=()=>{w.value,J()},J=()=>{w.value.visible=!1,L.value.close()},N=e=>{const a=e.currentTarget.dataset.index,l=O.value[a];$.value={visible:!0,editIndex:a,isMain:l.isMain,pilot:[l.index],combatIndex:[l.combatIndex]},P.value.open()},D=()=>{$.value,F()},F=()=>{$.value.visible=!1,P.value.close()},z=e=>{const a=e.currentTarget.dataset.index,l=O.value[a];S.value={visible:!0,editIndex:a,core:[l.index],combatIndex:[l.combatIndex]},A.value.open()},B=()=>{S.value,G()},G=()=>{S.value.visible=!1,A.value.close()};return(e,a)=>{const y=i("my-page-header"),g=n,C=i("my-divider"),K=i("my-ad-custom"),Q=i("my-bottom-safety-space"),R=p,U=m,V=f,W=x;return u(),l(r,null,[t(y),t(g,{class:"pt_4"},{default:s((()=>[t(g,{class:"mx_4 mb_4 shadow radius bg-color"},{default:s((()=>[t(g,{class:"d_flex px_4 items_center"},{default:s((()=>[t(g,{class:"py_4 font_bold"},{default:s((()=>[c("总战力")])),_:1}),t(g,{class:"grow"}),t(g,{class:"py_4"},{default:s((()=>[c(o(X.value.combat),1)])),_:1})])),_:1})])),_:1}),t(g,{class:"mx_4 mb_4 shadow radius bg-color"},{default:s((()=>[(u(!0),l(r,null,d(j.value,((e,a)=>(u(),b(g,{key:a,class:_(["d_flex items_center text_base px_4 p_relative",0===a?"radius_t border_b":a===j.value.length?"radius_b":"border_b"]),"hover-class":"bg-hover","data-index":a,onClick:T},{default:s((()=>[t(g,{class:"my_4 p_relative"},{default:s((()=>[c(o(e.label||e.partLabel)+" ",1),t(g,{class:"text_xs text-info"},{default:s((()=>[c(o(e.originalCrystal.map((e=>e.label)).join("、")),1)])),_:2},1024),e.hasSkin?(u(),b(g,{key:0,class:"yang-badge basic count circle warning"},{default:s((()=>[c("有皮肤")])),_:1})):v("",!0)])),_:2},1024),t(g,{class:"grow"}),t(g,{class:"text-info text_right"},{default:s((()=>[c(o(e.combat),1)])),_:2},1024),t(g,{class:"yang-badge ribbon"},{default:s((()=>[t(g,{class:"content basic"},{default:s((()=>[c(o(e.partLabel),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","data-index"])))),128))])),_:1}),t(g,{class:"mx_4 mb_4 shadow radius bg-color"},{default:s((()=>[(u(!0),l(r,null,d(O.value,((e,a)=>(u(),b(g,{key:a,class:_(["d_flex items_center text_base px_4 p_relative",0===a?"radius_t border_b":a===O.value.length?"radius_b":"border_b"]),"hover-class":"bg-hover","data-index":a,onClick:N},{default:s((()=>[t(g,{class:"my_4 p_relative"},{default:s((()=>[c(o(e.label||e.typeLabel)+" ",1),t(g,{class:"text_xs text-info"},{default:s((()=>[c(o(e.partCombat.map((a=>Math.round(a*(e.isMain?1:.3)))).join("、")),1)])),_:2},1024)])),_:2},1024),t(g,{class:"grow"}),t(g,{class:"text-info text_right"},{default:s((()=>[c(o(e.combat),1)])),_:2},1024),t(g,{class:"yang-badge ribbon"},{default:s((()=>[t(g,{class:"content basic"},{default:s((()=>[c(o(e.isMain?"主驾驶":"副驾驶"),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","data-index"])))),128))])),_:1}),t(g,{class:"mx_4 mb_4 shadow radius bg-color"},{default:s((()=>[(u(!0),l(r,null,d(E.value,((e,a)=>(u(),b(g,{key:a,class:_(["d_flex items_center text_base px_4 p_relative",0===a?"radius_t border_b":a===E.value.length?"radius_b":"border_b"]),"hover-class":"bg-hover","data-index":a,onClick:z},{default:s((()=>[t(g,{class:"my_4 p_relative"},{default:s((()=>[c(o(e.label)+" ",1),t(g,{class:"text_xs text-info"},{default:s((()=>[c(o(e.partCombat.map((e=>Math.round(.25*e))).join("、")),1)])),_:2},1024)])),_:2},1024),t(g,{class:"grow"}),t(g,{class:"text-info text_right"},{default:s((()=>[c(o(e.combat),1)])),_:2},1024),t(g,{class:"yang-badge ribbon"},{default:s((()=>[t(g,{class:"content basic"},{default:s((()=>[c(o(e.typeLabel),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","data-index"])))),128))])),_:1}),t(C,{content:"本页内容仅供参考，具体以官方数据为准。"}),t(K,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),t(Q,{version:""}),t(h,{ref_key:"editEquipmentPopup",ref:L,type:"bottom","safe-area":!1,"mask-click":!1},{default:s((()=>[w.value.visible?(u(),b(g,{key:0,class:"bg-color radius_t"},{default:s((()=>[t(g,{class:"d_flex px_4 py_3 items_center"},{default:s((()=>[t(g,{class:"font_bold"},{default:s((()=>[c("修改装备("+o(w.value.partLabel)+")",1)])),_:1}),t(g,{class:"grow"}),t(R,{class:"yang-button danger outline extra-small my-icon-delete","hover-class":"hover"})])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(g,{class:"title"},{default:s((()=>[c("装备")])),_:1}),t(g,{class:"grow"}),t(V,{value:w.value.equipment,class:"popup-picker",onChange:a[0]||(a[0]=e=>w.value.equipment=e.detail.value)},{default:s((()=>[t(U,null,{default:s((()=>{var e;return[(u(!0),l(r,null,d(null==(e=k.value.find((e=>e.part===w.value.part)))?void 0:e.children,((e,a)=>(u(),b(g,{key:a,class:"d_flex center"},{default:s((()=>[c(o(e.label),1)])),_:2},1024)))),128))]})),_:1}),t(U,null,{default:s((()=>{var e;return[(u(!0),l(r,null,d(null==(e=k.value.find((e=>e.part===w.value.part)))?void 0:e.children[w.value.equipment[0]].children,((e,a)=>(u(),b(g,{key:a,class:"d_flex center"},{default:s((()=>[c(o(e.label),1)])),_:2},1024)))),128))]})),_:1})])),_:1},8,["value"])])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(g,{class:"title"},{default:s((()=>[c("原晶")])),_:1}),t(g,{class:"grow"}),t(V,{value:w.value.original,class:"popup-picker",onChange:a[1]||(a[1]=e=>w.value.original=e.detail.value)},{default:s((()=>[(u(!0),l(r,null,d(I.value,((e,a)=>(u(),b(U,{key:a},{default:s((()=>[2===w.value.part?(u(!0),l(r,{key:0},d(e.health,((a,l)=>(u(),b(g,{key:l,class:"d_flex center"},{default:s((()=>[c(o(e.isPercentage?~~(1e4*a)/100+"%":a),1)])),_:2},1024)))),128)):v("",!0),2!==w.value.part?(u(!0),l(r,{key:1},d(e.attack,((a,l)=>(u(),b(g,{key:l,class:"d_flex center"},{default:s((()=>[c(o(e.isPercentage?~~(1e4*a)/100+"%":a),1)])),_:2},1024)))),128)):v("",!0)])),_:2},1024)))),128))])),_:1},8,["value"])])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(g,{class:"title"},{default:s((()=>[c("是否有皮肤")])),_:1}),t(g,{class:"grow"}),t(W,{checked:w.value.hasSkin},null,8,["checked"])])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(R,{class:"yang-button outline block","hover-class":"hover",onClick:J},{default:s((()=>[c("取消")])),_:1}),t(R,{class:"yang-button primary block","hover-class":"hover",onClick:H},{default:s((()=>[c("保存")])),_:1})])),_:1}),t(g,{class:"h_safe"})])),_:1})):v("",!0)])),_:1},512),t(h,{ref_key:"editPilotPopup",ref:P,type:"bottom","safe-area":!1,"mask-click":!1},{default:s((()=>[$.value.visible?(u(),b(g,{key:0,class:"bg-color radius_t"},{default:s((()=>[t(g,{class:"d_flex px_4 py_3 items_center"},{default:s((()=>[t(g,{class:"font_bold"},{default:s((()=>[c("修改驾驶员（"+o($.value.isMain?"主":"副")+"驾驶）",1)])),_:1}),t(g,{class:"grow"}),t(R,{class:"yang-button danger outline extra-small my-icon-delete","hover-class":"hover"})])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(g,{class:"title"},{default:s((()=>[c("驾驶员")])),_:1}),t(g,{class:"grow"}),t(V,{value:$.value.pilot,class:"popup-picker",onChange:a[2]||(a[2]=e=>$.value.pilot=e.detail.value)},{default:s((()=>[t(U,null,{default:s((()=>[(u(!0),l(r,null,d(M.value,((e,a)=>(u(),b(g,{key:a,class:"d_flex center"},{default:s((()=>[c(o(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(g,{class:"title"},{default:s((()=>[c("等级/潜能")])),_:1}),t(g,{class:"grow"}),t(V,{value:$.value.combatIndex,class:"popup-picker",onChange:a[3]||(a[3]=e=>$.value.combatIndex=e.detail.value)},{default:s((()=>[t(U,null,{default:s((()=>[(u(!0),l(r,null,d(M.value[$.value.pilot[0]].children,((e,a)=>(u(),b(g,{key:a,class:"d_flex center"},{default:s((()=>[c(o(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(R,{class:"yang-button outline block","hover-class":"hover",onClick:F},{default:s((()=>[c("取消")])),_:1}),t(R,{class:"yang-button primary block","hover-class":"hover",onClick:D},{default:s((()=>[c("保存")])),_:1})])),_:1}),t(g,{class:"h_safe"})])),_:1})):v("",!0)])),_:1},512),t(h,{ref_key:"editCorePopup",ref:A,type:"bottom","safe-area":!1,"mask-click":!1},{default:s((()=>[S.value.visible?(u(),b(g,{key:0,class:"bg-color radius_t"},{default:s((()=>[t(g,{class:"d_flex px_4 py_3 items_center"},{default:s((()=>[t(g,{class:"font_bold"},{default:s((()=>[c("修改核心矩阵（上）")])),_:1}),t(g,{class:"grow"}),t(R,{class:"yang-button danger outline extra-small my-icon-delete","hover-class":"hover"})])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(g,{class:"title"},{default:s((()=>[c("核心名称")])),_:1}),t(g,{class:"grow"}),t(V,{value:S.value.core,class:"popup-picker",onChange:a[4]||(a[4]=e=>S.value.core=e.detail.value)},{default:s((()=>[t(U,null,{default:s((()=>[(u(!0),l(r,null,d(q.value,((e,a)=>(u(),b(g,{key:a,class:"d_flex center"},{default:s((()=>[c(o(e.label)+" - "+o(e.pilot),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(g,{class:"title"},{default:s((()=>[c("等级/潜能")])),_:1}),t(g,{class:"grow"}),t(V,{value:S.value.combatIndex,class:"popup-picker",onChange:a[5]||(a[5]=e=>$.value.combatIndex=e.detail.value)},{default:s((()=>[t(U,null,{default:s((()=>[(u(!0),l(r,null,d(q.value[S.value.core[0]].children,((e,a)=>(u(),b(g,{key:a,class:"d_flex center"},{default:s((()=>[c(o(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),t(g,{class:"d_flex px_4 py_3 items_center border_t"},{default:s((()=>[t(R,{class:"yang-button outline block","hover-class":"hover",onClick:G},{default:s((()=>[c("取消")])),_:1}),t(R,{class:"yang-button primary block","hover-class":"hover",onClick:B},{default:s((()=>[c("保存")])),_:1})])),_:1}),t(g,{class:"h_safe"})])),_:1})):v("",!0)])),_:1},512)])),_:1})],64)}}},[["__scopeId","data-v-1278a5d7"]]);export{k as default};
