import{_ as e,r as l,a8 as a,ad as t,c as s,a as u,w as i,F as n,i as _,b as c,v as d,x as f,o,g as r,h as v,f as p,n as m,e as b,t as x,aa as y,ai as g,O as k}from"./index-qv7V_o0z.js";import{_ as w}from"./uni-popup.WXREqdJZ.js";import{a as $}from"./config.Dny4K3GL.js";import{f as h}from"./data-all.CrM6Fjdh.js";const q=e({__name:"final-weapon",setup(e){uni.$sharePageTitle=`最终兵器-${$}`;const q=h.partData.map((e=>e.combat)),S=l({list:[{label:"套系",value:"suit"},{label:"品阶",value:"quality"}],active:"suit"}),C=l({list:[],active:""}),L=l({list:[],active:""}),N=l([]);l({});const j=l(null),O=l({}),z=[{label:"普通装备",url:"/pages/games/leitingzhanji/game-guide/equipment-ordinary"},{label:"战神装备",url:"/pages/games/leitingzhanji/game-guide/equipment-ares"},{label:"驾驶员",url:"/pages/games/leitingzhanji/game-guide/driver"},{label:"超维原晶",url:"/pages/games/leitingzhanji/game-guide/original-crystal"},{label:"最终兵器",url:"/pages/games/leitingzhanji/game-guide/final-weapon"}].filter((e=>[...a()].at(-1).route!==e.url.replace(/^\//,""))),D=t((()=>{const{active:e}=S.value,{active:l}=C.value,{active:a}=L.value;return N.value.filter((t=>"suit"===e?t.suit===l:"quality"!==e||t.quality===a))}));(()=>{const{partData:e,finalWeaponOption:l,finalWeaponList:a}=JSON.parse(JSON.stringify(h));C.value.list=l.suit.map((e=>({label:e.label,value:e.value}))).reverse(),C.value.active=C.value.list[0].value,L.value.list=l.quality.map((e=>({label:e.label,value:e.value}))).reverse(),L.value.active=L.value.list[0].value,N.value=a.map((a=>l.quality.map(((t,s)=>{const u=a.skillEffect[s];return t.gradation.map(((i,n)=>{const _=l.attribute[s][n].at(-1),c=e.map((e=>2===e.value?_.health:e.value===a.attackPart?_.attack:0));return{label:a.title,key:`weapon-${a.suit}-${t.value}-${i.value}`,imgKey:`weapon-${a.suit}-${t.value}`,suit:a.suit,level:_.level,maxLevel:i.maxLevel,scoreMarkup:_.scoreMarkup,combat:c,combatNum:Math.round(c.reduce(((e,l,a)=>e+l*q[a]),0)),combatLabel:`${e.find((e=>e.value===a.attackPart)).label}攻击: ${_.attack}, 装甲生命: ${_.health}`,quality:t.value,qualityKey:`${t.value}-${i.value}`,qualityLabel:`${t.label}${i.isMax?" MAX":i.value?` +${i.value}`:""}`,description:a.description,skillName:a.skillName,skillLevel:u.level,skillCommand:u.command,skillDescription:u.description,superSkill:a.superSkillEffect.quality===t.value,superSkillCommand:a.superSkillEffect.command,superSkillDescription:a.superSkillEffect.description}}))})))).flat(2)})();const M=t((()=>{const{finalWeaponOption:e}=JSON.parse(JSON.stringify(h)),l=e.quality,a=e.material;return l.map((e=>e.gradation.map((l=>({label:`${e.label}${l.isMax?"MAX":l.value?`+${l.value}`:""}`,level:l.maxLevel,advance:Object.entries(l.advance).map((([e,l])=>l?`${l}*${a[e].label}`:null)).filter((e=>e)),upgrade:Object.entries(l.upgrade).map((([e,l])=>l?`${l}*${a[e].label}`:null)).filter((e=>e))}))))).flat(1)})),J=l(null),E=()=>{J.value.open()};return(e,l)=>{const a=c("my-page-header"),t=_,$=g,h=k,q=c("my-divider"),N=d(f("uni-popup"),w),P=c("my-ad-custom"),A=c("my-bottom-safety-space");return o(),s(n,null,[u(a),u(t,{class:"pt_4"},{default:i((()=>[u(t,{class:"mx_4 shadow radius bg-color py_2 mb_4"},{default:i((()=>[u(t,{class:"yang-nav-tabs evenly px_3 py_1"},{default:i((()=>[(o(!0),s(n,null,p(S.value.list,((e,l)=>(o(),r(t,{key:l,class:m(["yang-tabs__item",S.value.active===e.value?"active":""]),onClick:l=>S.value.active=e.value},{default:i((()=>[b(x(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),"suit"===S.value.active?(o(),r(t,{key:0,class:"yang-nav-tabs swipeable scroll_x mx_2 px_0 py_1 border_b"},{default:i((()=>[(o(!0),s(n,null,p(C.value.list,((e,l)=>(o(),r(t,{key:l,class:m(["yang-tabs__item",C.value.active===e.value?"active":""]),onClick:l=>C.value.active=e.value},{default:i((()=>[b(x(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):v("",!0),"quality"===S.value.active?(o(),r(t,{key:1,class:"yang-nav-tabs swipeable scroll_x mx_2 px_0 py_1 border_b"},{default:i((()=>[(o(!0),s(n,null,p(L.value.list,((e,l)=>(o(),r(t,{key:l,class:m(["yang-tabs__item",L.value.active===e.value?"active":""]),onClick:l=>L.value.active=e.value},{default:i((()=>[b(x(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):v("",!0),u(t,{class:"d_flex wrap px_2 pb_1 main_box"},{default:i((()=>[(o(!0),s(n,null,p(D.value,((e,l)=>(o(),r(t,{key:l,class:"col_3 d_flex vertical mt_4 px_1",onClick:l=>(e=>{var l;"trial"!==(null==(l=uni.getAccountInfoSync)?void 0:l.call(uni).miniProgram.envVersion)&&(j.value.open(),O.value=JSON.parse(JSON.stringify(e)))})(e)},{default:i((()=>[u(t,{class:"text_nowrap d_flex content_center"},{default:i((()=>[b(x(e.label),1)])),_:2},1024),u(t,{class:"px_2 text_xs"},{default:i((()=>[u(t,{class:"d_flex content_center"},{default:i((()=>[u(t,{class:""},{default:i((()=>[b(x(e.qualityLabel),1)])),_:2},1024)])),_:2},1024),u(t,{class:"d_flex content_between"},{default:i((()=>[u(t,{class:"text-info"},{default:i((()=>[b("Lv.")])),_:1}),u(t,{class:""},{default:i((()=>[b(x(e.level)+"/"+x(e.maxLevel),1)])),_:2},1024)])),_:2},1024),u(t,{class:"d_flex content_between"},{default:i((()=>[u(t,{class:"text-info"},{default:i((()=>[b("战力")])),_:1}),u(t,{class:""},{default:i((()=>[b(x(e.combatNum),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),u(t,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[u(t,{class:"d_flex px_4 items_center"},{default:i((()=>[u(t,{class:"py_4 grow"},{default:i((()=>[b("内容数据收集中，敬请期待")])),_:1})])),_:1})])),_:1}),u(t,{class:"mx_4 mb_4 shadow radius bg-color"},{default:i((()=>[u(t,{class:"d_flex px_4 items_center",onClick:E},{default:i((()=>[u(t,{class:"py_4 grow"},{default:i((()=>[b("养成消耗")])),_:1})])),_:1})])),_:1}),u(t,{class:"yang-fab d_flex vertical items_end gap_2"},{default:i((()=>[u(t,{class:"yang-button primary round text_size_sm h_unset px_3 py_2 m_0",onClick:E},{default:i((()=>[u(t,null,{default:i((()=>[b("养成消耗")])),_:1})])),_:1}),(o(!0),s(n,null,p(y(z),((e,l)=>(o(),r($,{key:l,url:e.url,class:"yang-button primary round text_size_sm h_unset px_3 py_2 m_0"},{default:i((()=>[b(x(e.label),1)])),_:2},1032,["url"])))),128))])),_:1}),u(N,{ref_key:"detailRef",ref:j},{default:i((()=>[u(t,{class:"bg-color radius",style:{"max-width":"80vw"}},{default:i((()=>[u(t,{class:"d_flex vertical px_4 py_3"},{default:i((()=>[u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info"},{default:i((()=>[b("名称：")])),_:1}),b(x(O.value.label),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info"},{default:i((()=>[b("等级：")])),_:1}),b(x(O.value.level)+"/"+x(O.value.maxLevel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info"},{default:i((()=>[b("等阶：")])),_:1}),b(x(O.value.qualityLabel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info"},{default:i((()=>[b("战力：")])),_:1}),b(x(O.value.combatNum),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info"},{default:i((()=>[b("属性：")])),_:1}),b(x(O.value.combatLabel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info text_nowrap"},{default:i((()=>[b("介绍：")])),_:1}),b(x(O.value.description),1)])),_:1})])),_:1}),u(q,{content:"常规驱动（普通技能）"}),u(t,{class:"d_flex vertical px_4 py_3"},{default:i((()=>[u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info"},{default:i((()=>[b("名称：")])),_:1}),b(x(O.value.skillName),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info"},{default:i((()=>[b("等级：")])),_:1}),b(x(O.value.skillLevel),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info"},{default:i((()=>[b("触发条件：")])),_:1}),b(x(O.value.skillCommand),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info text_nowrap"},{default:i((()=>[b("效果：")])),_:1}),b(x(O.value.skillDescription),1)])),_:1})])),_:1}),O.value.superSkill?(o(),s(n,{key:0},[u(q,{content:"超载驱动（终极技能）"}),u(q,{content:"仅主战生效，传说品质解锁"}),u(t,{class:"d_flex vertical px_4 py_3"},{default:i((()=>[u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info"},{default:i((()=>[b("触发条件：")])),_:1}),b(x(O.value.superSkillCommand),1)])),_:1}),u(t,{class:"d_flex content_between"},{default:i((()=>[u(h,{class:"text-info text_nowrap"},{default:i((()=>[b("效果：")])),_:1}),b(x(O.value.superSkillDescription),1)])),_:1})])),_:1})],64)):v("",!0)])),_:1})])),_:1},512),u(N,{ref_key:"consumeDialogRef",ref:J},{default:i((()=>[u(t,{class:"dialog_box bg-color radius py_3"},{default:i((()=>[u(t,{class:"d_flex center px_4"},{default:i((()=>[u(t,null,{default:i((()=>[b("养成消耗")])),_:1})])),_:1}),u(q,{content:"品阶/等级，进阶下一级所需材料"}),u(t,{class:"d_table w_100p px_4"},{default:i((()=>[u(t,{class:"d_table_row"},{default:i((()=>[u(t,{class:"d_table_cell"},{default:i((()=>[b("等阶")])),_:1}),u(t,{class:"d_table_cell text_center"},{default:i((()=>[b("等级")])),_:1}),u(t,{class:"d_table_cell text_center"},{default:i((()=>[b("进阶消耗")])),_:1}),u(t,{class:"d_table_cell text_right"},{default:i((()=>[b("升级消耗")])),_:1})])),_:1}),(o(!0),s(n,null,p(M.value,((e,l)=>(o(),r(t,{key:l,class:"d_table_row text_xs"},{default:i((()=>[u(t,{class:"d_table_cell middle"},{default:i((()=>[b(x(e.label),1)])),_:2},1024),u(t,{class:"d_table_cell middle text_center"},{default:i((()=>[b(x(e.level),1)])),_:2},1024),u(t,{class:"d_table_cell middle text_center"},{default:i((()=>[(o(!0),s(n,null,p(e.advance,((e,l)=>(o(),r(t,{key:l},{default:i((()=>[b(x(e),1)])),_:2},1024)))),128))])),_:2},1024),u(t,{class:"d_table_cell middle text_right"},{default:i((()=>[(o(!0),s(n,null,p(e.upgrade,((e,l)=>(o(),r(t,{key:l},{default:i((()=>[b(x(e),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1}),u(q,{content:"数据持续更新中，可联系作者更新补充。"})])),_:1})])),_:1},512),u(q,{content:"本页内容仅供参考，具体以官方数据为准。"}),u(P,{mp_weixin:"adunit-8c89cc4610403c81",mp_qq:"54ea1b2e68ecb1caa66494c8dc68d3b7"}),u(A,{version:""})])),_:1})],64)}}},[["__scopeId","data-v-dfcc5129"]]);export{q as default};
