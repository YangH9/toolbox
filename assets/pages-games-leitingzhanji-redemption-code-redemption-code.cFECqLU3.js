import{_ as a,r as e,l as s,a as t,e as l,b as d,w as r,F as c,U as u,V as o,s as i,W as n,n as _,i as f,o as p,d as m,c as b,t as y,j as v,R as g,f as x,Q as w,h,q as k,m as j}from"./index-DG7GS2BU.js";import{a as T,b as $,c as I,d as K}from"./config.DmCWn7As.js";const M=a({__name:"redemption-code",setup(a){uni.$sharePageTitle=`兑换码-${T}`;const M=`${$}-redemption-code-use`,N=e({updateTime:"",rewardKeyMap:[],IDList:[],data:[]}),D=e(s(M)||[]);u({title:"加载中"}),o({url:`https://runjs.work/transformer/project?id=${I}`,sslVerify:!1,success:a=>{var e,s;const t=null==(s=null==(e=a.data.data)?void 0:e.js)?void 0:s.source;if(t){const a=JSON.parse(t.replace(/\n/g," ").replace(/&quot;/g,'"')),{updateTime:e,rewardKeyMap:s,data:l,IDList:d}=a;N.value.updateTime=e,N.value.rewardKeyMap=s,N.value.IDList=d,N.value.data=l.reverse()}else i({title:"资源加载异常",icon:"none"})},complete:()=>{n()}});const L=a=>{const{code:e}=a.currentTarget.dataset;D.value.find((a=>a===e))||D.value.push(e),k(M,D.value),j({data:e,success:()=>{}})},W=()=>{_({url:`/pages/games/${$}/redemption-code/update/update`})};return(a,e)=>{const s=f,u=w,o=t("my-divider"),i=t("my-ad-custom"),n=t("my-bottom-safety-space");return p(),l(c,null,[d(s,{class:"pt_4"},{default:r((()=>[d(s,{class:"mx_4 mb_2 shadow radius bg-color"},{default:r((()=>[d(s,{class:"d_flex px_4 py_4 items_center"},{default:r((()=>[d(s,{class:"font_bold grow"},{default:r((()=>[m("兑换码")])),_:1}),N.value.updateTime?(p(),b(s,{key:0},{default:r((()=>[d(u,{class:"mr_2 text-info"},{default:r((()=>[m("更新时间:")])),_:1}),d(u,{class:"text-error font_bold"},{default:r((()=>[m(y(N.value.updateTime),1)])),_:1})])),_:1})):v("",!0)])),_:1})])),_:1}),d(o,null,{default:r((()=>[N.value.data.length?(p(),b(u,{key:0},{default:r((()=>[m("总计"),d(u,{class:"text-primary"},{default:r((()=>[m(y(N.value.data.length),1)])),_:1}),m("个，新增"),d(u,{class:"text-primary"},{default:r((()=>[m(y(N.value.data.filter((a=>a.isNew)).length),1)])),_:1}),m("个，")])),_:1})):v("",!0),m("点击"),d(u,{class:"text-error"},{default:r((()=>[m("复制")])),_:1}),g(K)?(p(),b(u,{key:1},{default:r((()=>[m("并启动"+y(g(T)),1)])),_:1})):v("",!0),m("。 "),d(s,{class:"text-error"},{default:r((()=>[m("底部有永久兑换码。")])),_:1})])),_:1}),d(s,{class:"mx_4 mb_4 shadow radius bg-color"},{default:r((()=>[(p(!0),l(c,null,x(N.value.data,((a,e)=>(p(),l(c,{key:e},[d(s,{class:h(["d_flex items_center text_base p_4 p_relative",0===e?"radius_t border_b":e===N.value.data.length?"radius_b":"border_b"]),"hover-class":"bg-hover","data-code":a.code,onClick:L},{default:r((()=>[d(s,{class:"p_relative"},{default:r((()=>[m(y(a.code)+" ",1),D.value.includes(a.code)?(p(),b(s,{key:0,class:"yang-badge basic count circle warning"},{default:r((()=>[m("已使用")])),_:1})):v("",!0)])),_:2},1024),d(s,{class:"grow"}),d(s,{class:"text-info text_right"},{default:r((()=>[m(y(a.reward.map(((a,e)=>((a,e)=>e?`${e}${N.value.rewardKeyMap[a]||""}`:"")(e,a))).filter((a=>a)).join("，")),1)])),_:2},1024),a.invalidity?(p(),b(s,{key:0,class:"yang-badge ribbon info"},{default:r((()=>[d(s,{class:"content basic"},{default:r((()=>[m("已失效")])),_:1})])),_:1})):v("",!0),a.forever?(p(),b(s,{key:1,class:"yang-badge ribbon"},{default:r((()=>[d(s,{class:"content basic"},{default:r((()=>[m("永久")])),_:1})])),_:1})):v("",!0),a.isNew?(p(),b(s,{key:2,class:"yang-badge ribbon"},{default:r((()=>[d(s,{class:"content basic"},{default:r((()=>[m("NEW")])),_:1})])),_:1})):v("",!0)])),_:2},1032,["class","data-code"]),!((e-2)%15)&&e<N.value.data.length-15+2?(p(),b(s,{key:0},{default:r((()=>[d(i,{mp_weixin:"adunit-a4678d8d13df3114",custom_class:"p_0 m_0"})])),_:1})):v("",!0)],64)))),128))])),_:1}),d(i,{mp_weixin:"adunit-8c89cc4610403c81"}),d(n,{version:""})])),_:1}),d(s,{class:"edit yang-fab yang-button primary circle",onClick:W},{default:r((()=>[d(s,{class:"my-icon my-icon-edit text_xxl"})])),_:1})],64)}}},[["__scopeId","data-v-8f3e7cab"]]);export{M as default};
